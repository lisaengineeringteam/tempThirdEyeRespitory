"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_panels_lovelace_components_hui-image_ts"],{

/***/ "./src/common/util/parse-aspect-ratio.ts":
/*!***********************************************!*\
  !*** ./src/common/util/parse-aspect-ratio.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ parseAspectRatio)\n/* harmony export */ });\n// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78\n// Ignore everything else\nconst parseOrThrow = num => {\n  const parsed = parseFloat(num);\n\n  if (isNaN(parsed)) {\n    throw new Error(`${num} is not a number`);\n  }\n\n  return parsed;\n};\n\nfunction parseAspectRatio(input) {\n  if (!input) {\n    return null;\n  }\n\n  try {\n    if (input.endsWith(\"%\")) {\n      return {\n        w: 100,\n        h: parseOrThrow(input.substr(0, input.length - 1))\n      };\n    }\n\n    const arr = input.replace(\":\", \"x\").split(\"x\");\n\n    if (arr.length === 0) {\n      return null;\n    }\n\n    return arr.length === 1 ? {\n      w: parseOrThrow(arr[0]),\n      h: 1\n    } : {\n      w: parseOrThrow(arr[0]),\n      h: parseOrThrow(arr[1])\n    };\n  } catch (err) {// Ignore the error\n  }\n\n  return null;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTs7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBOztBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vdXRpbC9wYXJzZS1hc3BlY3QtcmF0aW8udHM/ODdlYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBIYW5kbGUgMTZ4OSwgMTY6OSwgMS43OHgxLCAxLjc4OjEsIDEuNzhcbi8vIElnbm9yZSBldmVyeXRoaW5nIGVsc2VcbmNvbnN0IHBhcnNlT3JUaHJvdyA9IChudW0pID0+IHtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2VGbG9hdChudW0pO1xuICBpZiAoaXNOYU4ocGFyc2VkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtudW19IGlzIG5vdCBhIG51bWJlcmApO1xuICB9XG4gIHJldHVybiBwYXJzZWQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZUFzcGVjdFJhdGlvKGlucHV0OiBzdHJpbmcpIHtcbiAgaWYgKCFpbnB1dCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKGlucHV0LmVuZHNXaXRoKFwiJVwiKSkge1xuICAgICAgcmV0dXJuIHsgdzogMTAwLCBoOiBwYXJzZU9yVGhyb3coaW5wdXQuc3Vic3RyKDAsIGlucHV0Lmxlbmd0aCAtIDEpKSB9O1xuICAgIH1cblxuICAgIGNvbnN0IGFyciA9IGlucHV0LnJlcGxhY2UoXCI6XCIsIFwieFwiKS5zcGxpdChcInhcIik7XG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBhcnIubGVuZ3RoID09PSAxXG4gICAgICA/IHsgdzogcGFyc2VPclRocm93KGFyclswXSksIGg6IDEgfVxuICAgICAgOiB7IHc6IHBhcnNlT3JUaHJvdyhhcnJbMF0pLCBoOiBwYXJzZU9yVGhyb3coYXJyWzFdKSB9O1xuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIC8vIElnbm9yZSB0aGUgZXJyb3JcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/util/parse-aspect-ratio.ts\n");

/***/ }),

/***/ "./src/components/ha-camera-stream.ts":
/*!********************************************!*\
  !*** ./src/components/ha-camera-stream.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/config/is_component_loaded */ \"./src/common/config/is_component_loaded.ts\");\n/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/entity/compute_state_name */ \"./src/common/entity/compute_state_name.ts\");\n/* harmony import */ var _common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/entity/supports-feature */ \"./src/common/entity/supports-feature.ts\");\n/* harmony import */ var _data_camera__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../data/camera */ \"./src/data/camera.ts\");\n/* harmony import */ var _ha_hls_player__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ha-hls-player */ \"./src/components/ha-hls-player.ts\");\n/* harmony import */ var _ha_web_rtc_player__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ha-web-rtc-player */ \"./src/components/ha-web-rtc-player.ts\");\nfunction _decorate(decorators, factory, superClass, mixins) { var api = _getDecoratorsApi(); if (mixins) { for (var i = 0; i < mixins.length; i++) { api = mixins[i](api); } } var r = factory(function initialize(O) { api.initializeInstanceElements(O, decorated.elements); }, superClass); var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators); api.initializeClassElements(r.F, decorated.elements); return api.runClassFinishers(r.F, decorated.finishers); }\n\nfunction _getDecoratorsApi() { _getDecoratorsApi = function () { return api; }; var api = { elementsDefinitionOrder: [[\"method\"], [\"field\"]], initializeInstanceElements: function (O, elements) { [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { if (element.kind === kind && element.placement === \"own\") { this.defineClassElement(O, element); } }, this); }, this); }, initializeClassElements: function (F, elements) { var proto = F.prototype; [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { var placement = element.placement; if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) { var receiver = placement === \"static\" ? F : proto; this.defineClassElement(receiver, element); } }, this); }, this); }, defineClassElement: function (receiver, element) { var descriptor = element.descriptor; if (element.kind === \"field\") { var initializer = element.initializer; descriptor = { enumerable: descriptor.enumerable, writable: descriptor.writable, configurable: descriptor.configurable, value: initializer === void 0 ? void 0 : initializer.call(receiver) }; } Object.defineProperty(receiver, element.key, descriptor); }, decorateClass: function (elements, decorators) { var newElements = []; var finishers = []; var placements = { static: [], prototype: [], own: [] }; elements.forEach(function (element) { this.addElementPlacement(element, placements); }, this); elements.forEach(function (element) { if (!_hasDecorators(element)) return newElements.push(element); var elementFinishersExtras = this.decorateElement(element, placements); newElements.push(elementFinishersExtras.element); newElements.push.apply(newElements, elementFinishersExtras.extras); finishers.push.apply(finishers, elementFinishersExtras.finishers); }, this); if (!decorators) { return { elements: newElements, finishers: finishers }; } var result = this.decorateConstructor(newElements, decorators); finishers.push.apply(finishers, result.finishers); result.finishers = finishers; return result; }, addElementPlacement: function (element, placements, silent) { var keys = placements[element.placement]; if (!silent && keys.indexOf(element.key) !== -1) { throw new TypeError(\"Duplicated element (\" + element.key + \")\"); } keys.push(element.key); }, decorateElement: function (element, placements) { var extras = []; var finishers = []; for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) { var keys = placements[element.placement]; keys.splice(keys.indexOf(element.key), 1); var elementObject = this.fromElementDescriptor(element); var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject); element = elementFinisherExtras.element; this.addElementPlacement(element, placements); if (elementFinisherExtras.finisher) { finishers.push(elementFinisherExtras.finisher); } var newExtras = elementFinisherExtras.extras; if (newExtras) { for (var j = 0; j < newExtras.length; j++) { this.addElementPlacement(newExtras[j], placements); } extras.push.apply(extras, newExtras); } } return { element: element, finishers: finishers, extras: extras }; }, decorateConstructor: function (elements, decorators) { var finishers = []; for (var i = decorators.length - 1; i >= 0; i--) { var obj = this.fromClassDescriptor(elements); var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj); if (elementsAndFinisher.finisher !== undefined) { finishers.push(elementsAndFinisher.finisher); } if (elementsAndFinisher.elements !== undefined) { elements = elementsAndFinisher.elements; for (var j = 0; j < elements.length - 1; j++) { for (var k = j + 1; k < elements.length; k++) { if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) { throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\"); } } } } } return { elements: elements, finishers: finishers }; }, fromElementDescriptor: function (element) { var obj = { kind: element.kind, key: element.key, placement: element.placement, descriptor: element.descriptor }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); if (element.kind === \"field\") obj.initializer = element.initializer; return obj; }, toElementDescriptors: function (elementObjects) { if (elementObjects === undefined) return; return _toArray(elementObjects).map(function (elementObject) { var element = this.toElementDescriptor(elementObject); this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\"); this.disallowProperty(elementObject, \"extras\", \"An element descriptor\"); return element; }, this); }, toElementDescriptor: function (elementObject) { var kind = String(elementObject.kind); if (kind !== \"method\" && kind !== \"field\") { throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"'); } var key = _toPropertyKey(elementObject.key); var placement = String(elementObject.placement); if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") { throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"'); } var descriptor = elementObject.descriptor; this.disallowProperty(elementObject, \"elements\", \"An element descriptor\"); var element = { kind: kind, key: key, placement: placement, descriptor: Object.assign({}, descriptor) }; if (kind !== \"field\") { this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\"); } else { this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\"); element.initializer = elementObject.initializer; } return element; }, toElementFinisherExtras: function (elementObject) { var element = this.toElementDescriptor(elementObject); var finisher = _optionalCallableProperty(elementObject, \"finisher\"); var extras = this.toElementDescriptors(elementObject.extras); return { element: element, finisher: finisher, extras: extras }; }, fromClassDescriptor: function (elements) { var obj = { kind: \"class\", elements: elements.map(this.fromElementDescriptor, this) }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); return obj; }, toClassDescriptor: function (obj) { var kind = String(obj.kind); if (kind !== \"class\") { throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"'); } this.disallowProperty(obj, \"key\", \"A class descriptor\"); this.disallowProperty(obj, \"placement\", \"A class descriptor\"); this.disallowProperty(obj, \"descriptor\", \"A class descriptor\"); this.disallowProperty(obj, \"initializer\", \"A class descriptor\"); this.disallowProperty(obj, \"extras\", \"A class descriptor\"); var finisher = _optionalCallableProperty(obj, \"finisher\"); var elements = this.toElementDescriptors(obj.elements); return { elements: elements, finisher: finisher }; }, runClassFinishers: function (constructor, finishers) { for (var i = 0; i < finishers.length; i++) { var newConstructor = (0, finishers[i])(constructor); if (newConstructor !== undefined) { if (typeof newConstructor !== \"function\") { throw new TypeError(\"Finishers must return a constructor.\"); } constructor = newConstructor; } } return constructor; }, disallowProperty: function (obj, name, objectType) { if (obj[name] !== undefined) { throw new TypeError(objectType + \" can't have a .\" + name + \" property.\"); } } }; return api; }\n\nfunction _createElementDescriptor(def) { var key = _toPropertyKey(def.key); var descriptor; if (def.kind === \"method\") { descriptor = { value: def.value, writable: true, configurable: true, enumerable: false }; } else if (def.kind === \"get\") { descriptor = { get: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"set\") { descriptor = { set: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"field\") { descriptor = { configurable: true, writable: true, enumerable: true }; } var element = { kind: def.kind === \"field\" ? \"field\" : \"method\", key: key, placement: def.static ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\", descriptor: descriptor }; if (def.decorators) element.decorators = def.decorators; if (def.kind === \"field\") element.initializer = def.value; return element; }\n\nfunction _coalesceGetterSetter(element, other) { if (element.descriptor.get !== undefined) { other.descriptor.get = element.descriptor.get; } else { other.descriptor.set = element.descriptor.set; } }\n\nfunction _coalesceClassElements(elements) { var newElements = []; var isSameElement = function (other) { return other.kind === \"method\" && other.key === element.key && other.placement === element.placement; }; for (var i = 0; i < elements.length; i++) { var element = elements[i]; var other; if (element.kind === \"method\" && (other = newElements.find(isSameElement))) { if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) { if (_hasDecorators(element) || _hasDecorators(other)) { throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\"); } other.descriptor = element.descriptor; } else { if (_hasDecorators(element)) { if (_hasDecorators(other)) { throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\"); } other.decorators = element.decorators; } _coalesceGetterSetter(element, other); } } else { newElements.push(element); } } return newElements; }\n\nfunction _hasDecorators(element) { return element.decorators && element.decorators.length; }\n\nfunction _isDataDescriptor(desc) { return desc !== undefined && !(desc.value === undefined && desc.writable === undefined); }\n\nfunction _optionalCallableProperty(obj, name) { var value = obj[name]; if (value !== undefined && typeof value !== \"function\") { throw new TypeError(\"Expected '\" + name + \"' to be a function\"); } return value; }\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\n\n\n\nlet HaCameraStream = _decorate([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.customElement)(\"ha-camera-stream\")], function (_initialize, _LitElement) {\n  class HaCameraStream extends _LitElement {\n    constructor(...args) {\n      super(...args);\n\n      _initialize(this);\n    }\n\n  }\n\n  return {\n    F: HaCameraStream,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"stateObj\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"controls\"\n      })],\n      key: \"controls\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"muted\"\n      })],\n      key: \"muted\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"allow-exoplayer\"\n      })],\n      key: \"allowExoPlayer\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_forceMJPEG\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_url\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_connected\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: // We keep track if we should force MJPEG if there was a failure\n      // to get the HLS stream url. This is reset if we change entities.\n      function willUpdate(changedProps) {\n        var _changedProps$get;\n\n        if (changedProps.has(\"stateObj\") && !this._shouldRenderMJPEG && this.stateObj && ((_changedProps$get = changedProps.get(\"stateObj\")) === null || _changedProps$get === void 0 ? void 0 : _changedProps$get.entity_id) !== this.stateObj.entity_id && this.stateObj.attributes.frontend_stream_type === _data_camera__WEBPACK_IMPORTED_MODULE_5__.STREAM_TYPE_HLS) {\n          this._forceMJPEG = undefined;\n          this._url = undefined;\n\n          this._getStreamUrl();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(HaCameraStream.prototype), \"connectedCallback\", this).call(this);\n\n        this._connected = true;\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaCameraStream.prototype), \"disconnectedCallback\", this).call(this);\n\n        this._connected = false;\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.stateObj) {\n          return lit__WEBPACK_IMPORTED_MODULE_0__.html``;\n        }\n\n        if ( false || this._shouldRenderMJPEG) {\n          return lit__WEBPACK_IMPORTED_MODULE_0__.html` <img\n        .src=${ false ? 0 : this._connected ? (0,_data_camera__WEBPACK_IMPORTED_MODULE_5__.computeMJPEGStreamUrl)(this.stateObj) : \"\"}\n        .alt=${`Preview of the ${(0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__.computeStateName)(this.stateObj)} camera.`}\n      />`;\n        }\n\n        if (this.stateObj.attributes.frontend_stream_type === _data_camera__WEBPACK_IMPORTED_MODULE_5__.STREAM_TYPE_HLS) {\n          return this._url ? lit__WEBPACK_IMPORTED_MODULE_0__.html`<ha-hls-player\n            autoplay\n            playsinline\n            .allowExoPlayer=${this.allowExoPlayer}\n            .muted=${this.muted}\n            .controls=${this.controls}\n            .hass=${this.hass}\n            .url=${this._url}\n          ></ha-hls-player>` : lit__WEBPACK_IMPORTED_MODULE_0__.html``;\n        }\n\n        if (this.stateObj.attributes.frontend_stream_type === _data_camera__WEBPACK_IMPORTED_MODULE_5__.STREAM_TYPE_WEB_RTC) {\n          return lit__WEBPACK_IMPORTED_MODULE_0__.html`<ha-web-rtc-player\n        autoplay\n        playsinline\n        .muted=${this.muted}\n        .controls=${this.controls}\n        .hass=${this.hass}\n        .entityid=${this.stateObj.entity_id}\n      ></ha-web-rtc-player>`;\n        }\n\n        return lit__WEBPACK_IMPORTED_MODULE_0__.html``;\n      }\n    }, {\n      kind: \"get\",\n      key: \"_shouldRenderMJPEG\",\n      value: function _shouldRenderMJPEG() {\n        if (this._forceMJPEG === this.stateObj.entity_id) {\n          // Fallback when unable to fetch stream url\n          return true;\n        }\n\n        if (!(0,_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_4__.supportsFeature)(this.stateObj, _data_camera__WEBPACK_IMPORTED_MODULE_5__.CAMERA_SUPPORT_STREAM)) {\n          // Steaming is not supported by the camera so fallback to MJPEG stream\n          return true;\n        }\n\n        if (this.stateObj.attributes.frontend_stream_type === _data_camera__WEBPACK_IMPORTED_MODULE_5__.STREAM_TYPE_WEB_RTC) {\n          // Browser support required for WebRTC\n          return typeof RTCPeerConnection === \"undefined\";\n        } // Server side stream component required for HLS\n\n\n        return !(0,_common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_2__.isComponentLoaded)(this.hass, \"stream\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getStreamUrl\",\n      value: async function _getStreamUrl() {\n        try {\n          const {\n            url\n          } = await (0,_data_camera__WEBPACK_IMPORTED_MODULE_5__.fetchStreamUrl)(this.hass, this.stateObj.entity_id);\n          this._url = url;\n        } catch (err) {\n          // Fails if we were unable to get a stream\n          // eslint-disable-next-line\n          console.error(err);\n          this._forceMJPEG = this.stateObj.entity_id;\n        }\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return lit__WEBPACK_IMPORTED_MODULE_0__.css`\n      :host,\n      img {\n        display: block;\n      }\n\n      img {\n        width: 100%;\n      }\n    `;\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_0__.LitElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9oYS1jYW1lcmEtc3RyZWFtLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTs7QUFHQTtBQURBO0FBQ0E7QUFBQTs7QUFBQTtBQUFBOztBQUFBOzs7QUFBQTs7O0FBQ0E7QUFBQTtBQUFBOzs7OztBQUVBO0FBQUE7QUFBQTs7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTs7OztBQUNBOzs7OztBQUVBO0FBQUE7QUFBQTtBQUFBOzs7O0FBQ0E7Ozs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7Ozs7QUFDQTs7Ozs7QUFJQTs7Ozs7QUFFQTs7Ozs7QUFFQTs7OztBQUFBOzs7Ozs7QUFOQTtBQUNBO0FBT0E7QUFBQTs7QUFDQTtBQVFBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQXRJQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2NvbXBvbmVudHMvaGEtY2FtZXJhLXN0cmVhbS50cz85NjFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGNzcyxcbiAgQ1NTUmVzdWx0R3JvdXAsXG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBUZW1wbGF0ZVJlc3VsdCxcbn0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHN0YXRlIH0gZnJvbSBcImxpdC9kZWNvcmF0b3JzXCI7XG5pbXBvcnQgeyBpc0NvbXBvbmVudExvYWRlZCB9IGZyb20gXCIuLi9jb21tb24vY29uZmlnL2lzX2NvbXBvbmVudF9sb2FkZWRcIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7IHN1cHBvcnRzRmVhdHVyZSB9IGZyb20gXCIuLi9jb21tb24vZW50aXR5L3N1cHBvcnRzLWZlYXR1cmVcIjtcbmltcG9ydCB7XG4gIENhbWVyYUVudGl0eSxcbiAgQ0FNRVJBX1NVUFBPUlRfU1RSRUFNLFxuICBjb21wdXRlTUpQRUdTdHJlYW1VcmwsXG4gIGZldGNoU3RyZWFtVXJsLFxuICBTVFJFQU1fVFlQRV9ITFMsXG4gIFNUUkVBTV9UWVBFX1dFQl9SVEMsXG59IGZyb20gXCIuLi9kYXRhL2NhbWVyYVwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IFwiLi9oYS1obHMtcGxheWVyXCI7XG5pbXBvcnQgXCIuL2hhLXdlYi1ydGMtcGxheWVyXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaGEtY2FtZXJhLXN0cmVhbVwiKVxuY2xhc3MgSGFDYW1lcmFTdHJlYW0gZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgc3RhdGVPYmo/OiBDYW1lcmFFbnRpdHk7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiBcImNvbnRyb2xzXCIgfSlcbiAgcHVibGljIGNvbnRyb2xzID0gZmFsc2U7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiBcIm11dGVkXCIgfSlcbiAgcHVibGljIG11dGVkID0gZmFsc2U7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiBcImFsbG93LWV4b3BsYXllclwiIH0pXG4gIHB1YmxpYyBhbGxvd0V4b1BsYXllciA9IGZhbHNlO1xuXG4gIC8vIFdlIGtlZXAgdHJhY2sgaWYgd2Ugc2hvdWxkIGZvcmNlIE1KUEVHIGlmIHRoZXJlIHdhcyBhIGZhaWx1cmVcbiAgLy8gdG8gZ2V0IHRoZSBITFMgc3RyZWFtIHVybC4gVGhpcyBpcyByZXNldCBpZiB3ZSBjaGFuZ2UgZW50aXRpZXMuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2ZvcmNlTUpQRUc/OiBzdHJpbmc7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfdXJsPzogc3RyaW5nO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2Nvbm5lY3RlZCA9IGZhbHNlO1xuXG4gIHB1YmxpYyB3aWxsVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICBjaGFuZ2VkUHJvcHMuaGFzKFwic3RhdGVPYmpcIikgJiZcbiAgICAgICF0aGlzLl9zaG91bGRSZW5kZXJNSlBFRyAmJlxuICAgICAgdGhpcy5zdGF0ZU9iaiAmJlxuICAgICAgKGNoYW5nZWRQcm9wcy5nZXQoXCJzdGF0ZU9ialwiKSBhcyBDYW1lcmFFbnRpdHkgfCB1bmRlZmluZWQpPy5lbnRpdHlfaWQgIT09XG4gICAgICAgIHRoaXMuc3RhdGVPYmouZW50aXR5X2lkICYmXG4gICAgICB0aGlzLnN0YXRlT2JqIS5hdHRyaWJ1dGVzLmZyb250ZW5kX3N0cmVhbV90eXBlID09PSBTVFJFQU1fVFlQRV9ITFNcbiAgICApIHtcbiAgICAgIHRoaXMuX2ZvcmNlTUpQRUcgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLl91cmwgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLl9nZXRTdHJlYW1VcmwoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9jb25uZWN0ZWQgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAoIXRoaXMuc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuICAgIGlmIChfX0RFTU9fXyB8fCB0aGlzLl9zaG91bGRSZW5kZXJNSlBFRykge1xuICAgICAgcmV0dXJuIGh0bWxgIDxpbWdcbiAgICAgICAgLnNyYz0ke19fREVNT19fXG4gICAgICAgICAgPyB0aGlzLnN0YXRlT2JqLmF0dHJpYnV0ZXMuZW50aXR5X3BpY3R1cmUhXG4gICAgICAgICAgOiB0aGlzLl9jb25uZWN0ZWRcbiAgICAgICAgICA/IGNvbXB1dGVNSlBFR1N0cmVhbVVybCh0aGlzLnN0YXRlT2JqKVxuICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgLmFsdD0ke2BQcmV2aWV3IG9mIHRoZSAke2NvbXB1dGVTdGF0ZU5hbWUodGhpcy5zdGF0ZU9iail9IGNhbWVyYS5gfVxuICAgICAgLz5gO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZU9iai5hdHRyaWJ1dGVzLmZyb250ZW5kX3N0cmVhbV90eXBlID09PSBTVFJFQU1fVFlQRV9ITFMpIHtcbiAgICAgIHJldHVybiB0aGlzLl91cmxcbiAgICAgICAgPyBodG1sYDxoYS1obHMtcGxheWVyXG4gICAgICAgICAgICBhdXRvcGxheVxuICAgICAgICAgICAgcGxheXNpbmxpbmVcbiAgICAgICAgICAgIC5hbGxvd0V4b1BsYXllcj0ke3RoaXMuYWxsb3dFeG9QbGF5ZXJ9XG4gICAgICAgICAgICAubXV0ZWQ9JHt0aGlzLm11dGVkfVxuICAgICAgICAgICAgLmNvbnRyb2xzPSR7dGhpcy5jb250cm9sc31cbiAgICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgICAgLnVybD0ke3RoaXMuX3VybH1cbiAgICAgICAgICA+PC9oYS1obHMtcGxheWVyPmBcbiAgICAgICAgOiBodG1sYGA7XG4gICAgfVxuICAgIGlmICh0aGlzLnN0YXRlT2JqLmF0dHJpYnV0ZXMuZnJvbnRlbmRfc3RyZWFtX3R5cGUgPT09IFNUUkVBTV9UWVBFX1dFQl9SVEMpIHtcbiAgICAgIHJldHVybiBodG1sYDxoYS13ZWItcnRjLXBsYXllclxuICAgICAgICBhdXRvcGxheVxuICAgICAgICBwbGF5c2lubGluZVxuICAgICAgICAubXV0ZWQ9JHt0aGlzLm11dGVkfVxuICAgICAgICAuY29udHJvbHM9JHt0aGlzLmNvbnRyb2xzfVxuICAgICAgICAuaGFzcz0ke3RoaXMuaGFzc31cbiAgICAgICAgLmVudGl0eWlkPSR7dGhpcy5zdGF0ZU9iai5lbnRpdHlfaWR9XG4gICAgICA+PC9oYS13ZWItcnRjLXBsYXllcj5gO1xuICAgIH1cbiAgICByZXR1cm4gaHRtbGBgO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX3Nob3VsZFJlbmRlck1KUEVHKCkge1xuICAgIGlmICh0aGlzLl9mb3JjZU1KUEVHID09PSB0aGlzLnN0YXRlT2JqIS5lbnRpdHlfaWQpIHtcbiAgICAgIC8vIEZhbGxiYWNrIHdoZW4gdW5hYmxlIHRvIGZldGNoIHN0cmVhbSB1cmxcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXN1cHBvcnRzRmVhdHVyZSh0aGlzLnN0YXRlT2JqISwgQ0FNRVJBX1NVUFBPUlRfU1RSRUFNKSkge1xuICAgICAgLy8gU3RlYW1pbmcgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgY2FtZXJhIHNvIGZhbGxiYWNrIHRvIE1KUEVHIHN0cmVhbVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGVPYmohLmF0dHJpYnV0ZXMuZnJvbnRlbmRfc3RyZWFtX3R5cGUgPT09IFNUUkVBTV9UWVBFX1dFQl9SVENcbiAgICApIHtcbiAgICAgIC8vIEJyb3dzZXIgc3VwcG9ydCByZXF1aXJlZCBmb3IgV2ViUlRDXG4gICAgICByZXR1cm4gdHlwZW9mIFJUQ1BlZXJDb25uZWN0aW9uID09PSBcInVuZGVmaW5lZFwiO1xuICAgIH1cbiAgICAvLyBTZXJ2ZXIgc2lkZSBzdHJlYW0gY29tcG9uZW50IHJlcXVpcmVkIGZvciBITFNcbiAgICByZXR1cm4gIWlzQ29tcG9uZW50TG9hZGVkKHRoaXMuaGFzcyEsIFwic3RyZWFtXCIpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZ2V0U3RyZWFtVXJsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHVybCB9ID0gYXdhaXQgZmV0Y2hTdHJlYW1VcmwoXG4gICAgICAgIHRoaXMuaGFzcyEsXG4gICAgICAgIHRoaXMuc3RhdGVPYmohLmVudGl0eV9pZFxuICAgICAgKTtcblxuICAgICAgdGhpcy5fdXJsID0gdXJsO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICAvLyBGYWlscyBpZiB3ZSB3ZXJlIHVuYWJsZSB0byBnZXQgYSBzdHJlYW1cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuXG4gICAgICB0aGlzLl9mb3JjZU1KUEVHID0gdGhpcy5zdGF0ZU9iaiEuZW50aXR5X2lkO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdEdyb3VwIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3QsXG4gICAgICBpbWcge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cblxuICAgICAgaW1nIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaGEtY2FtZXJhLXN0cmVhbVwiOiBIYUNhbWVyYVN0cmVhbTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/ha-camera-stream.ts\n");

/***/ }),

/***/ "./src/components/ha-web-rtc-player.ts":
/*!*********************************************!*\
  !*** ./src/components/ha-web-rtc-player.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _data_camera__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../data/camera */ \"./src/data/camera.ts\");\n/* harmony import */ var _ha_alert__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ha-alert */ \"./src/components/ha-alert.ts\");\nfunction _decorate(decorators, factory, superClass, mixins) { var api = _getDecoratorsApi(); if (mixins) { for (var i = 0; i < mixins.length; i++) { api = mixins[i](api); } } var r = factory(function initialize(O) { api.initializeInstanceElements(O, decorated.elements); }, superClass); var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators); api.initializeClassElements(r.F, decorated.elements); return api.runClassFinishers(r.F, decorated.finishers); }\n\nfunction _getDecoratorsApi() { _getDecoratorsApi = function () { return api; }; var api = { elementsDefinitionOrder: [[\"method\"], [\"field\"]], initializeInstanceElements: function (O, elements) { [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { if (element.kind === kind && element.placement === \"own\") { this.defineClassElement(O, element); } }, this); }, this); }, initializeClassElements: function (F, elements) { var proto = F.prototype; [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { var placement = element.placement; if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) { var receiver = placement === \"static\" ? F : proto; this.defineClassElement(receiver, element); } }, this); }, this); }, defineClassElement: function (receiver, element) { var descriptor = element.descriptor; if (element.kind === \"field\") { var initializer = element.initializer; descriptor = { enumerable: descriptor.enumerable, writable: descriptor.writable, configurable: descriptor.configurable, value: initializer === void 0 ? void 0 : initializer.call(receiver) }; } Object.defineProperty(receiver, element.key, descriptor); }, decorateClass: function (elements, decorators) { var newElements = []; var finishers = []; var placements = { static: [], prototype: [], own: [] }; elements.forEach(function (element) { this.addElementPlacement(element, placements); }, this); elements.forEach(function (element) { if (!_hasDecorators(element)) return newElements.push(element); var elementFinishersExtras = this.decorateElement(element, placements); newElements.push(elementFinishersExtras.element); newElements.push.apply(newElements, elementFinishersExtras.extras); finishers.push.apply(finishers, elementFinishersExtras.finishers); }, this); if (!decorators) { return { elements: newElements, finishers: finishers }; } var result = this.decorateConstructor(newElements, decorators); finishers.push.apply(finishers, result.finishers); result.finishers = finishers; return result; }, addElementPlacement: function (element, placements, silent) { var keys = placements[element.placement]; if (!silent && keys.indexOf(element.key) !== -1) { throw new TypeError(\"Duplicated element (\" + element.key + \")\"); } keys.push(element.key); }, decorateElement: function (element, placements) { var extras = []; var finishers = []; for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) { var keys = placements[element.placement]; keys.splice(keys.indexOf(element.key), 1); var elementObject = this.fromElementDescriptor(element); var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject); element = elementFinisherExtras.element; this.addElementPlacement(element, placements); if (elementFinisherExtras.finisher) { finishers.push(elementFinisherExtras.finisher); } var newExtras = elementFinisherExtras.extras; if (newExtras) { for (var j = 0; j < newExtras.length; j++) { this.addElementPlacement(newExtras[j], placements); } extras.push.apply(extras, newExtras); } } return { element: element, finishers: finishers, extras: extras }; }, decorateConstructor: function (elements, decorators) { var finishers = []; for (var i = decorators.length - 1; i >= 0; i--) { var obj = this.fromClassDescriptor(elements); var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj); if (elementsAndFinisher.finisher !== undefined) { finishers.push(elementsAndFinisher.finisher); } if (elementsAndFinisher.elements !== undefined) { elements = elementsAndFinisher.elements; for (var j = 0; j < elements.length - 1; j++) { for (var k = j + 1; k < elements.length; k++) { if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) { throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\"); } } } } } return { elements: elements, finishers: finishers }; }, fromElementDescriptor: function (element) { var obj = { kind: element.kind, key: element.key, placement: element.placement, descriptor: element.descriptor }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); if (element.kind === \"field\") obj.initializer = element.initializer; return obj; }, toElementDescriptors: function (elementObjects) { if (elementObjects === undefined) return; return _toArray(elementObjects).map(function (elementObject) { var element = this.toElementDescriptor(elementObject); this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\"); this.disallowProperty(elementObject, \"extras\", \"An element descriptor\"); return element; }, this); }, toElementDescriptor: function (elementObject) { var kind = String(elementObject.kind); if (kind !== \"method\" && kind !== \"field\") { throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"'); } var key = _toPropertyKey(elementObject.key); var placement = String(elementObject.placement); if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") { throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"'); } var descriptor = elementObject.descriptor; this.disallowProperty(elementObject, \"elements\", \"An element descriptor\"); var element = { kind: kind, key: key, placement: placement, descriptor: Object.assign({}, descriptor) }; if (kind !== \"field\") { this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\"); } else { this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\"); element.initializer = elementObject.initializer; } return element; }, toElementFinisherExtras: function (elementObject) { var element = this.toElementDescriptor(elementObject); var finisher = _optionalCallableProperty(elementObject, \"finisher\"); var extras = this.toElementDescriptors(elementObject.extras); return { element: element, finisher: finisher, extras: extras }; }, fromClassDescriptor: function (elements) { var obj = { kind: \"class\", elements: elements.map(this.fromElementDescriptor, this) }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); return obj; }, toClassDescriptor: function (obj) { var kind = String(obj.kind); if (kind !== \"class\") { throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"'); } this.disallowProperty(obj, \"key\", \"A class descriptor\"); this.disallowProperty(obj, \"placement\", \"A class descriptor\"); this.disallowProperty(obj, \"descriptor\", \"A class descriptor\"); this.disallowProperty(obj, \"initializer\", \"A class descriptor\"); this.disallowProperty(obj, \"extras\", \"A class descriptor\"); var finisher = _optionalCallableProperty(obj, \"finisher\"); var elements = this.toElementDescriptors(obj.elements); return { elements: elements, finisher: finisher }; }, runClassFinishers: function (constructor, finishers) { for (var i = 0; i < finishers.length; i++) { var newConstructor = (0, finishers[i])(constructor); if (newConstructor !== undefined) { if (typeof newConstructor !== \"function\") { throw new TypeError(\"Finishers must return a constructor.\"); } constructor = newConstructor; } } return constructor; }, disallowProperty: function (obj, name, objectType) { if (obj[name] !== undefined) { throw new TypeError(objectType + \" can't have a .\" + name + \" property.\"); } } }; return api; }\n\nfunction _createElementDescriptor(def) { var key = _toPropertyKey(def.key); var descriptor; if (def.kind === \"method\") { descriptor = { value: def.value, writable: true, configurable: true, enumerable: false }; } else if (def.kind === \"get\") { descriptor = { get: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"set\") { descriptor = { set: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"field\") { descriptor = { configurable: true, writable: true, enumerable: true }; } var element = { kind: def.kind === \"field\" ? \"field\" : \"method\", key: key, placement: def.static ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\", descriptor: descriptor }; if (def.decorators) element.decorators = def.decorators; if (def.kind === \"field\") element.initializer = def.value; return element; }\n\nfunction _coalesceGetterSetter(element, other) { if (element.descriptor.get !== undefined) { other.descriptor.get = element.descriptor.get; } else { other.descriptor.set = element.descriptor.set; } }\n\nfunction _coalesceClassElements(elements) { var newElements = []; var isSameElement = function (other) { return other.kind === \"method\" && other.key === element.key && other.placement === element.placement; }; for (var i = 0; i < elements.length; i++) { var element = elements[i]; var other; if (element.kind === \"method\" && (other = newElements.find(isSameElement))) { if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) { if (_hasDecorators(element) || _hasDecorators(other)) { throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\"); } other.descriptor = element.descriptor; } else { if (_hasDecorators(element)) { if (_hasDecorators(other)) { throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\"); } other.decorators = element.decorators; } _coalesceGetterSetter(element, other); } } else { newElements.push(element); } } return newElements; }\n\nfunction _hasDecorators(element) { return element.decorators && element.decorators.length; }\n\nfunction _isDataDescriptor(desc) { return desc !== undefined && !(desc.value === undefined && desc.writable === undefined); }\n\nfunction _optionalCallableProperty(obj, name) { var value = obj[name]; if (value !== undefined && typeof value !== \"function\") { throw new TypeError(\"Expected '\" + name + \"' to be a function\"); } return value; }\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n/**\n * A WebRTC stream is established by first sending an offer through a signal\n * path via an integration. An answer is returned, then the rest of the stream\n * is handled entirely client side.\n */\n\nlet HaWebRtcPlayer = _decorate([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.customElement)(\"ha-web-rtc-player\")], function (_initialize, _LitElement) {\n  class HaWebRtcPlayer extends _LitElement {\n    constructor(...args) {\n      super(...args);\n\n      _initialize(this);\n    }\n\n  }\n\n  return {\n    F: HaWebRtcPlayer,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"entityid\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"controls\"\n      })],\n      key: \"controls\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"muted\"\n      })],\n      key: \"muted\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"autoplay\"\n      })],\n      key: \"autoPlay\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"playsinline\"\n      })],\n      key: \"playsInline\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_error\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.query)(\"#remote-stream\")],\n      key: \"_videoEl\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_peerConnection\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_remoteStream\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: // don't cache this, as we remove it on disconnects\n      function render() {\n        if (this._error) {\n          return lit__WEBPACK_IMPORTED_MODULE_0__.html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`;\n        }\n\n        return lit__WEBPACK_IMPORTED_MODULE_0__.html`\n      <video\n        id=\"remote-stream\"\n        ?autoplay=${this.autoPlay}\n        .muted=${this.muted}\n        ?playsinline=${this.playsInline}\n        ?controls=${this.controls}\n      ></video>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(HaWebRtcPlayer.prototype), \"connectedCallback\", this).call(this);\n\n        if (this.hasUpdated) {\n          this._startWebRtc();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaWebRtcPlayer.prototype), \"disconnectedCallback\", this).call(this);\n\n        this._cleanUp();\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        if (!changedProperties.has(\"entityid\")) {\n          return;\n        }\n\n        if (!this._videoEl) {\n          return;\n        }\n\n        this._startWebRtc();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_startWebRtc\",\n      value: async function _startWebRtc() {\n        this._error = undefined;\n        const peerConnection = new RTCPeerConnection(); // Some cameras (such as nest) require a data channel to establish a stream\n        // however, not used by any integrations.\n\n        peerConnection.createDataChannel(\"dataSendChannel\");\n        peerConnection.addTransceiver(\"audio\", {\n          direction: \"recvonly\"\n        });\n        peerConnection.addTransceiver(\"video\", {\n          direction: \"recvonly\"\n        });\n        const offerOptions = {\n          offerToReceiveAudio: true,\n          offerToReceiveVideo: true\n        };\n        const offer = await peerConnection.createOffer(offerOptions);\n        await peerConnection.setLocalDescription(offer);\n        let webRtcAnswer;\n\n        try {\n          webRtcAnswer = await (0,_data_camera__WEBPACK_IMPORTED_MODULE_2__.handleWebRtcOffer)(this.hass, this.entityid, offer.sdp);\n        } catch (err) {\n          this._error = \"Failed to start WebRTC stream: \" + err.message;\n          peerConnection.close();\n          return;\n        } // Setup callbacks to render remote stream once media tracks are discovered.\n\n\n        const remoteStream = new MediaStream();\n        peerConnection.addEventListener(\"track\", event => {\n          remoteStream.addTrack(event.track);\n          this._videoEl.srcObject = remoteStream;\n        });\n        this._remoteStream = remoteStream; // Initiate the stream with the remote device\n\n        const remoteDesc = new RTCSessionDescription({\n          type: \"answer\",\n          sdp: webRtcAnswer.answer\n        });\n\n        try {\n          await peerConnection.setRemoteDescription(remoteDesc);\n        } catch (err) {\n          this._error = \"Failed to connect WebRTC stream: \" + err.message;\n          peerConnection.close();\n          return;\n        }\n\n        this._peerConnection = peerConnection;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_cleanUp\",\n      value: function _cleanUp() {\n        if (this._remoteStream) {\n          this._remoteStream.getTracks().forEach(track => {\n            track.stop();\n          });\n\n          this._remoteStream = undefined;\n        }\n\n        if (this._videoEl) {\n          this._videoEl.removeAttribute(\"src\");\n\n          this._videoEl.load();\n        }\n\n        if (this._peerConnection) {\n          this._peerConnection.close();\n\n          this._peerConnection = undefined;\n        }\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return lit__WEBPACK_IMPORTED_MODULE_0__.css`\n      :host,\n      video {\n        display: block;\n      }\n\n      video {\n        width: 100%;\n        max-height: var(--video-max-height, calc(100vh - 97px));\n      }\n    `;\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_0__.LitElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9oYS13ZWItcnRjLXBsYXllci50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFRQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBREE7QUFDQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7OztBQUFBOzs7QUFDQTtBQUFBO0FBQUE7Ozs7O0FBRUE7Ozs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7Ozs7QUFDQTs7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTs7OztBQUNBOzs7OztBQUVBO0FBQUE7QUFBQTtBQUFBOzs7O0FBQ0E7Ozs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7Ozs7QUFDQTs7Ozs7QUFFQTs7Ozs7QUFHQTs7Ozs7Ozs7Ozs7Ozs7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTtBQUVBO0FBRUE7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBR0E7QUFFQTs7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUZBOztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOzs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFuSkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2hhLXdlYi1ydGMtcGxheWVyLnRzPzUyMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3NzLFxuICBDU1NSZXN1bHRHcm91cCxcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxufSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50LCBwcm9wZXJ0eSwgc3RhdGUsIHF1ZXJ5IH0gZnJvbSBcImxpdC9kZWNvcmF0b3JzXCI7XG5pbXBvcnQgeyBoYW5kbGVXZWJSdGNPZmZlciwgV2ViUnRjQW5zd2VyIH0gZnJvbSBcIi4uL2RhdGEvY2FtZXJhXCI7XG5pbXBvcnQgdHlwZSB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCBcIi4vaGEtYWxlcnRcIjtcblxuLyoqXG4gKiBBIFdlYlJUQyBzdHJlYW0gaXMgZXN0YWJsaXNoZWQgYnkgZmlyc3Qgc2VuZGluZyBhbiBvZmZlciB0aHJvdWdoIGEgc2lnbmFsXG4gKiBwYXRoIHZpYSBhbiBpbnRlZ3JhdGlvbi4gQW4gYW5zd2VyIGlzIHJldHVybmVkLCB0aGVuIHRoZSByZXN0IG9mIHRoZSBzdHJlYW1cbiAqIGlzIGhhbmRsZWQgZW50aXJlbHkgY2xpZW50IHNpZGUuXG4gKi9cbkBjdXN0b21FbGVtZW50KFwiaGEtd2ViLXJ0Yy1wbGF5ZXJcIilcbmNsYXNzIEhhV2ViUnRjUGxheWVyIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIGhhc3MhOiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBlbnRpdHlpZCE6IHN0cmluZztcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwiY29udHJvbHNcIiB9KVxuICBwdWJsaWMgY29udHJvbHMgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwibXV0ZWRcIiB9KVxuICBwdWJsaWMgbXV0ZWQgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwiYXV0b3BsYXlcIiB9KVxuICBwdWJsaWMgYXV0b1BsYXkgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwicGxheXNpbmxpbmVcIiB9KVxuICBwdWJsaWMgcGxheXNJbmxpbmUgPSBmYWxzZTtcblxuICBAc3RhdGUoKSBwcml2YXRlIF9lcnJvcj86IHN0cmluZztcblxuICAvLyBkb24ndCBjYWNoZSB0aGlzLCBhcyB3ZSByZW1vdmUgaXQgb24gZGlzY29ubmVjdHNcbiAgQHF1ZXJ5KFwiI3JlbW90ZS1zdHJlYW1cIikgcHJpdmF0ZSBfdmlkZW9FbCE6IEhUTUxWaWRlb0VsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBfcGVlckNvbm5lY3Rpb24/OiBSVENQZWVyQ29ubmVjdGlvbjtcblxuICBwcml2YXRlIF9yZW1vdGVTdHJlYW0/OiBNZWRpYVN0cmVhbTtcblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAodGhpcy5fZXJyb3IpIHtcbiAgICAgIHJldHVybiBodG1sYDxoYS1hbGVydCBhbGVydC10eXBlPVwiZXJyb3JcIj4ke3RoaXMuX2Vycm9yfTwvaGEtYWxlcnQ+YDtcbiAgICB9XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8dmlkZW9cbiAgICAgICAgaWQ9XCJyZW1vdGUtc3RyZWFtXCJcbiAgICAgICAgP2F1dG9wbGF5PSR7dGhpcy5hdXRvUGxheX1cbiAgICAgICAgLm11dGVkPSR7dGhpcy5tdXRlZH1cbiAgICAgICAgP3BsYXlzaW5saW5lPSR7dGhpcy5wbGF5c0lubGluZX1cbiAgICAgICAgP2NvbnRyb2xzPSR7dGhpcy5jb250cm9sc31cbiAgICAgID48L3ZpZGVvPlxuICAgIGA7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAodGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICB0aGlzLl9zdGFydFdlYlJ0YygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuX2NsZWFuVXAoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvdmVycmlkZSB1cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlczx0aGlzPikge1xuICAgIGlmICghY2hhbmdlZFByb3BlcnRpZXMuaGFzKFwiZW50aXR5aWRcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLl92aWRlb0VsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N0YXJ0V2ViUnRjKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9zdGFydFdlYlJ0YygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLl9lcnJvciA9IHVuZGVmaW5lZDtcblxuICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKCk7XG4gICAgLy8gU29tZSBjYW1lcmFzIChzdWNoIGFzIG5lc3QpIHJlcXVpcmUgYSBkYXRhIGNoYW5uZWwgdG8gZXN0YWJsaXNoIGEgc3RyZWFtXG4gICAgLy8gaG93ZXZlciwgbm90IHVzZWQgYnkgYW55IGludGVncmF0aW9ucy5cbiAgICBwZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbChcImRhdGFTZW5kQ2hhbm5lbFwiKTtcbiAgICBwZWVyQ29ubmVjdGlvbi5hZGRUcmFuc2NlaXZlcihcImF1ZGlvXCIsIHsgZGlyZWN0aW9uOiBcInJlY3Zvbmx5XCIgfSk7XG4gICAgcGVlckNvbm5lY3Rpb24uYWRkVHJhbnNjZWl2ZXIoXCJ2aWRlb1wiLCB7IGRpcmVjdGlvbjogXCJyZWN2b25seVwiIH0pO1xuXG4gICAgY29uc3Qgb2ZmZXJPcHRpb25zOiBSVENPZmZlck9wdGlvbnMgPSB7XG4gICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlLFxuICAgICAgb2ZmZXJUb1JlY2VpdmVWaWRlbzogdHJ1ZSxcbiAgICB9O1xuICAgIGNvbnN0IG9mZmVyOiBSVENTZXNzaW9uRGVzY3JpcHRpb25Jbml0ID0gYXdhaXQgcGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoXG4gICAgICBvZmZlck9wdGlvbnNcbiAgICApO1xuICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpO1xuXG4gICAgbGV0IHdlYlJ0Y0Fuc3dlcjogV2ViUnRjQW5zd2VyO1xuICAgIHRyeSB7XG4gICAgICB3ZWJSdGNBbnN3ZXIgPSBhd2FpdCBoYW5kbGVXZWJSdGNPZmZlcihcbiAgICAgICAgdGhpcy5oYXNzLFxuICAgICAgICB0aGlzLmVudGl0eWlkLFxuICAgICAgICBvZmZlci5zZHAhXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICB0aGlzLl9lcnJvciA9IFwiRmFpbGVkIHRvIHN0YXJ0IFdlYlJUQyBzdHJlYW06IFwiICsgZXJyLm1lc3NhZ2U7XG4gICAgICBwZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNldHVwIGNhbGxiYWNrcyB0byByZW5kZXIgcmVtb3RlIHN0cmVhbSBvbmNlIG1lZGlhIHRyYWNrcyBhcmUgZGlzY292ZXJlZC5cbiAgICBjb25zdCByZW1vdGVTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTtcbiAgICBwZWVyQ29ubmVjdGlvbi5hZGRFdmVudExpc3RlbmVyKFwidHJhY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICByZW1vdGVTdHJlYW0uYWRkVHJhY2soZXZlbnQudHJhY2spO1xuICAgICAgdGhpcy5fdmlkZW9FbC5zcmNPYmplY3QgPSByZW1vdGVTdHJlYW07XG4gICAgfSk7XG4gICAgdGhpcy5fcmVtb3RlU3RyZWFtID0gcmVtb3RlU3RyZWFtO1xuXG4gICAgLy8gSW5pdGlhdGUgdGhlIHN0cmVhbSB3aXRoIHRoZSByZW1vdGUgZGV2aWNlXG4gICAgY29uc3QgcmVtb3RlRGVzYyA9IG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oe1xuICAgICAgdHlwZTogXCJhbnN3ZXJcIixcbiAgICAgIHNkcDogd2ViUnRjQW5zd2VyLmFuc3dlcixcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24ocmVtb3RlRGVzYyk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHRoaXMuX2Vycm9yID0gXCJGYWlsZWQgdG8gY29ubmVjdCBXZWJSVEMgc3RyZWFtOiBcIiArIGVyci5tZXNzYWdlO1xuICAgICAgcGVlckNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcGVlckNvbm5lY3Rpb24gPSBwZWVyQ29ubmVjdGlvbjtcbiAgfVxuXG4gIHByaXZhdGUgX2NsZWFuVXAoKSB7XG4gICAgaWYgKHRoaXMuX3JlbW90ZVN0cmVhbSkge1xuICAgICAgdGhpcy5fcmVtb3RlU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fcmVtb3RlU3RyZWFtID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fdmlkZW9FbCkge1xuICAgICAgdGhpcy5fdmlkZW9FbC5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNcIik7XG4gICAgICB0aGlzLl92aWRlb0VsLmxvYWQoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3BlZXJDb25uZWN0aW9uKSB7XG4gICAgICB0aGlzLl9wZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0R3JvdXAge1xuICAgIHJldHVybiBjc3NgXG4gICAgICA6aG9zdCxcbiAgICAgIHZpZGVvIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB9XG5cbiAgICAgIHZpZGVvIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG1heC1oZWlnaHQ6IHZhcigtLXZpZGVvLW1heC1oZWlnaHQsIGNhbGMoMTAwdmggLSA5N3B4KSk7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaGEtd2ViLXJ0Yy1wbGF5ZXJcIjogSGFXZWJSdGNQbGF5ZXI7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/ha-web-rtc-player.ts\n");

/***/ }),

/***/ "./src/panels/lovelace/components/hui-image.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/components/hui-image.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HuiImage\": () => (/* binding */ HuiImage)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var lit_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/directives/class-map */ \"./node_modules/lit/directives/class-map.js\");\n/* harmony import */ var lit_directives_style_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit/directives/style-map */ \"./node_modules/lit/directives/style-map.js\");\n/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/const */ \"./src/common/const.ts\");\n/* harmony import */ var _common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/util/parse-aspect-ratio */ \"./src/common/util/parse-aspect-ratio.ts\");\n/* harmony import */ var _components_ha_camera_stream__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/ha-camera-stream */ \"./src/components/ha-camera-stream.ts\");\n/* harmony import */ var _data_camera__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../data/camera */ \"./src/data/camera.ts\");\n/* harmony import */ var _data_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../data/entity */ \"./src/data/entity.ts\");\n/* harmony import */ var _components_ha_circular_progress__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../components/ha-circular-progress */ \"./src/components/ha-circular-progress.ts\");\nfunction _decorate(decorators, factory, superClass, mixins) { var api = _getDecoratorsApi(); if (mixins) { for (var i = 0; i < mixins.length; i++) { api = mixins[i](api); } } var r = factory(function initialize(O) { api.initializeInstanceElements(O, decorated.elements); }, superClass); var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators); api.initializeClassElements(r.F, decorated.elements); return api.runClassFinishers(r.F, decorated.finishers); }\n\nfunction _getDecoratorsApi() { _getDecoratorsApi = function () { return api; }; var api = { elementsDefinitionOrder: [[\"method\"], [\"field\"]], initializeInstanceElements: function (O, elements) { [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { if (element.kind === kind && element.placement === \"own\") { this.defineClassElement(O, element); } }, this); }, this); }, initializeClassElements: function (F, elements) { var proto = F.prototype; [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { var placement = element.placement; if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) { var receiver = placement === \"static\" ? F : proto; this.defineClassElement(receiver, element); } }, this); }, this); }, defineClassElement: function (receiver, element) { var descriptor = element.descriptor; if (element.kind === \"field\") { var initializer = element.initializer; descriptor = { enumerable: descriptor.enumerable, writable: descriptor.writable, configurable: descriptor.configurable, value: initializer === void 0 ? void 0 : initializer.call(receiver) }; } Object.defineProperty(receiver, element.key, descriptor); }, decorateClass: function (elements, decorators) { var newElements = []; var finishers = []; var placements = { static: [], prototype: [], own: [] }; elements.forEach(function (element) { this.addElementPlacement(element, placements); }, this); elements.forEach(function (element) { if (!_hasDecorators(element)) return newElements.push(element); var elementFinishersExtras = this.decorateElement(element, placements); newElements.push(elementFinishersExtras.element); newElements.push.apply(newElements, elementFinishersExtras.extras); finishers.push.apply(finishers, elementFinishersExtras.finishers); }, this); if (!decorators) { return { elements: newElements, finishers: finishers }; } var result = this.decorateConstructor(newElements, decorators); finishers.push.apply(finishers, result.finishers); result.finishers = finishers; return result; }, addElementPlacement: function (element, placements, silent) { var keys = placements[element.placement]; if (!silent && keys.indexOf(element.key) !== -1) { throw new TypeError(\"Duplicated element (\" + element.key + \")\"); } keys.push(element.key); }, decorateElement: function (element, placements) { var extras = []; var finishers = []; for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) { var keys = placements[element.placement]; keys.splice(keys.indexOf(element.key), 1); var elementObject = this.fromElementDescriptor(element); var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject); element = elementFinisherExtras.element; this.addElementPlacement(element, placements); if (elementFinisherExtras.finisher) { finishers.push(elementFinisherExtras.finisher); } var newExtras = elementFinisherExtras.extras; if (newExtras) { for (var j = 0; j < newExtras.length; j++) { this.addElementPlacement(newExtras[j], placements); } extras.push.apply(extras, newExtras); } } return { element: element, finishers: finishers, extras: extras }; }, decorateConstructor: function (elements, decorators) { var finishers = []; for (var i = decorators.length - 1; i >= 0; i--) { var obj = this.fromClassDescriptor(elements); var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj); if (elementsAndFinisher.finisher !== undefined) { finishers.push(elementsAndFinisher.finisher); } if (elementsAndFinisher.elements !== undefined) { elements = elementsAndFinisher.elements; for (var j = 0; j < elements.length - 1; j++) { for (var k = j + 1; k < elements.length; k++) { if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) { throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\"); } } } } } return { elements: elements, finishers: finishers }; }, fromElementDescriptor: function (element) { var obj = { kind: element.kind, key: element.key, placement: element.placement, descriptor: element.descriptor }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); if (element.kind === \"field\") obj.initializer = element.initializer; return obj; }, toElementDescriptors: function (elementObjects) { if (elementObjects === undefined) return; return _toArray(elementObjects).map(function (elementObject) { var element = this.toElementDescriptor(elementObject); this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\"); this.disallowProperty(elementObject, \"extras\", \"An element descriptor\"); return element; }, this); }, toElementDescriptor: function (elementObject) { var kind = String(elementObject.kind); if (kind !== \"method\" && kind !== \"field\") { throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"'); } var key = _toPropertyKey(elementObject.key); var placement = String(elementObject.placement); if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") { throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"'); } var descriptor = elementObject.descriptor; this.disallowProperty(elementObject, \"elements\", \"An element descriptor\"); var element = { kind: kind, key: key, placement: placement, descriptor: Object.assign({}, descriptor) }; if (kind !== \"field\") { this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\"); } else { this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\"); element.initializer = elementObject.initializer; } return element; }, toElementFinisherExtras: function (elementObject) { var element = this.toElementDescriptor(elementObject); var finisher = _optionalCallableProperty(elementObject, \"finisher\"); var extras = this.toElementDescriptors(elementObject.extras); return { element: element, finisher: finisher, extras: extras }; }, fromClassDescriptor: function (elements) { var obj = { kind: \"class\", elements: elements.map(this.fromElementDescriptor, this) }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); return obj; }, toClassDescriptor: function (obj) { var kind = String(obj.kind); if (kind !== \"class\") { throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"'); } this.disallowProperty(obj, \"key\", \"A class descriptor\"); this.disallowProperty(obj, \"placement\", \"A class descriptor\"); this.disallowProperty(obj, \"descriptor\", \"A class descriptor\"); this.disallowProperty(obj, \"initializer\", \"A class descriptor\"); this.disallowProperty(obj, \"extras\", \"A class descriptor\"); var finisher = _optionalCallableProperty(obj, \"finisher\"); var elements = this.toElementDescriptors(obj.elements); return { elements: elements, finisher: finisher }; }, runClassFinishers: function (constructor, finishers) { for (var i = 0; i < finishers.length; i++) { var newConstructor = (0, finishers[i])(constructor); if (newConstructor !== undefined) { if (typeof newConstructor !== \"function\") { throw new TypeError(\"Finishers must return a constructor.\"); } constructor = newConstructor; } } return constructor; }, disallowProperty: function (obj, name, objectType) { if (obj[name] !== undefined) { throw new TypeError(objectType + \" can't have a .\" + name + \" property.\"); } } }; return api; }\n\nfunction _createElementDescriptor(def) { var key = _toPropertyKey(def.key); var descriptor; if (def.kind === \"method\") { descriptor = { value: def.value, writable: true, configurable: true, enumerable: false }; } else if (def.kind === \"get\") { descriptor = { get: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"set\") { descriptor = { set: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"field\") { descriptor = { configurable: true, writable: true, enumerable: true }; } var element = { kind: def.kind === \"field\" ? \"field\" : \"method\", key: key, placement: def.static ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\", descriptor: descriptor }; if (def.decorators) element.decorators = def.decorators; if (def.kind === \"field\") element.initializer = def.value; return element; }\n\nfunction _coalesceGetterSetter(element, other) { if (element.descriptor.get !== undefined) { other.descriptor.get = element.descriptor.get; } else { other.descriptor.set = element.descriptor.set; } }\n\nfunction _coalesceClassElements(elements) { var newElements = []; var isSameElement = function (other) { return other.kind === \"method\" && other.key === element.key && other.placement === element.placement; }; for (var i = 0; i < elements.length; i++) { var element = elements[i]; var other; if (element.kind === \"method\" && (other = newElements.find(isSameElement))) { if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) { if (_hasDecorators(element) || _hasDecorators(other)) { throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\"); } other.descriptor = element.descriptor; } else { if (_hasDecorators(element)) { if (_hasDecorators(other)) { throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\"); } other.decorators = element.decorators; } _coalesceGetterSetter(element, other); } } else { newElements.push(element); } } return newElements; }\n\nfunction _hasDecorators(element) { return element.decorators && element.decorators.length; }\n\nfunction _isDataDescriptor(desc) { return desc !== undefined && !(desc.value === undefined && desc.writable === undefined); }\n\nfunction _optionalCallableProperty(obj, name) { var value = obj[name]; if (value !== undefined && typeof value !== \"function\") { throw new TypeError(\"Expected '\" + name + \"' to be a function\"); } return value; }\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\n\n\n\n\nconst UPDATE_INTERVAL = 10000;\nconst DEFAULT_FILTER = \"grayscale(100%)\";\nconst MAX_IMAGE_WIDTH = 640;\nconst ASPECT_RATIO_DEFAULT = 9 / 16;\nvar LoadState;\n\n(function (LoadState) {\n  LoadState[LoadState[\"Loading\"] = 1] = \"Loading\";\n  LoadState[LoadState[\"Loaded\"] = 2] = \"Loaded\";\n  LoadState[LoadState[\"Error\"] = 3] = \"Error\";\n})(LoadState || (LoadState = {}));\n\nlet HuiImage = _decorate([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.customElement)(\"hui-image\")], function (_initialize, _LitElement) {\n  class HuiImage extends _LitElement {\n    constructor(...args) {\n      super(...args);\n\n      _initialize(this);\n    }\n\n  }\n\n  return {\n    F: HuiImage,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"entity\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"image\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"stateImage\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"cameraImage\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"cameraView\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"aspectRatio\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"filter\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"stateFilter\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"darkModeImage\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"darkModeFilter\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_imageVisible\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_loadState\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_cameraImageSrc\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_loadedImageSrc\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_intersectionObserver\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_lastImageHeight\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_cameraUpdater\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_ratio\",\n\n      value() {\n        return null;\n      }\n\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(HuiImage.prototype), \"connectedCallback\", this).call(this);\n\n        if (this._loadState === undefined) {\n          this._loadState = LoadState.Loading;\n        }\n\n        if (this.cameraImage && this.cameraView !== \"live\") {\n          this._startIntersectionObserverOrUpdates();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HuiImage.prototype), \"disconnectedCallback\", this).call(this);\n\n        this._stopUpdateCameraInterval();\n\n        this._stopIntersectionObserver();\n\n        this._imageVisible = undefined;\n      }\n    }, {\n      kind: \"method\",\n      key: \"handleIntersectionCallback\",\n      value: function handleIntersectionCallback(entries) {\n        this._imageVisible = entries[0].isIntersecting;\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        if (changedProps.has(\"hass\")) {\n          const oldHass = changedProps.get(\"hass\");\n\n          if (this._shouldStartCameraUpdates(oldHass)) {\n            this._startIntersectionObserverOrUpdates();\n          } else if (!this.hass.connected) {\n            this._stopUpdateCameraInterval();\n\n            this._stopIntersectionObserver();\n\n            this._loadState = LoadState.Loading;\n            this._cameraImageSrc = undefined;\n            this._loadedImageSrc = undefined;\n          }\n        }\n\n        if (changedProps.has(\"_imageVisible\")) {\n          if (this._imageVisible) {\n            if (this._shouldStartCameraUpdates()) {\n              this._startUpdateCameraInterval();\n            }\n          } else {\n            this._stopUpdateCameraInterval();\n          }\n        }\n\n        if (changedProps.has(\"aspectRatio\")) {\n          this._ratio = this.aspectRatio ? (0,_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(this.aspectRatio) : null;\n        }\n\n        if (this._loadState === LoadState.Loading && !this.cameraImage) {\n          this._loadState = LoadState.Loaded;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.hass) {\n          return lit__WEBPACK_IMPORTED_MODULE_0__.html``;\n        }\n\n        const useRatio = Boolean(this._ratio && this._ratio.w > 0 && this._ratio.h > 0);\n        const stateObj = this.entity ? this.hass.states[this.entity] : undefined;\n        const entityState = stateObj ? stateObj.state : _data_entity__WEBPACK_IMPORTED_MODULE_8__.UNAVAILABLE; // Figure out image source to use\n\n        let imageSrc;\n        let cameraObj; // Track if we are we using a fallback image, used for filter.\n\n        let imageFallback = !this.stateImage;\n\n        if (this.cameraImage) {\n          if (this.cameraView === \"live\") {\n            cameraObj = this.hass.states[this.cameraImage];\n          } else {\n            imageSrc = this._cameraImageSrc;\n          }\n        } else if (this.stateImage) {\n          const stateImage = this.stateImage[entityState];\n\n          if (stateImage) {\n            imageSrc = stateImage;\n          } else {\n            imageSrc = this.image;\n            imageFallback = true;\n          }\n        } else if (this.darkModeImage && this.hass.themes.darkMode) {\n          imageSrc = this.darkModeImage;\n        } else {\n          imageSrc = this.image;\n        }\n\n        if (imageSrc) {\n          imageSrc = this.hass.hassUrl(imageSrc);\n        } // Figure out filter to use\n\n\n        let filter = this.filter || \"\";\n\n        if (this.hass.themes.darkMode && this.darkModeFilter) {\n          filter += this.darkModeFilter;\n        }\n\n        if (this.stateFilter && this.stateFilter[entityState]) {\n          filter += this.stateFilter[entityState];\n        }\n\n        if (!filter && this.entity) {\n          const isOff = !stateObj || _common_const__WEBPACK_IMPORTED_MODULE_4__.STATES_OFF.includes(entityState);\n          filter = isOff && imageFallback ? DEFAULT_FILTER : \"\";\n        }\n\n        return lit__WEBPACK_IMPORTED_MODULE_0__.html`\n      <div\n        style=${(0,lit_directives_style_map__WEBPACK_IMPORTED_MODULE_3__.styleMap)({\n          paddingBottom: useRatio ? `${(100 * this._ratio.h / this._ratio.w).toFixed(2)}%` : undefined,\n          backgroundImage: useRatio && this._loadedImageSrc ? `url(\"${this._loadedImageSrc}\")` : undefined,\n          filter: this._loadState === LoadState.Loaded || this.cameraView === \"live\" ? filter : undefined\n        })}\n        class=\"container ${(0,lit_directives_class_map__WEBPACK_IMPORTED_MODULE_2__.classMap)({\n          ratio: useRatio\n        })}\"\n      >\n        ${this.cameraImage && this.cameraView === \"live\" ? lit__WEBPACK_IMPORTED_MODULE_0__.html`\n              <ha-camera-stream\n                muted\n                .hass=${this.hass}\n                .stateObj=${cameraObj}\n              ></ha-camera-stream>\n            ` : imageSrc === undefined ? lit__WEBPACK_IMPORTED_MODULE_0__.html`` : lit__WEBPACK_IMPORTED_MODULE_0__.html`\n              <img\n                id=\"image\"\n                src=${imageSrc}\n                @error=${this._onImageError}\n                @load=${this._onImageLoad}\n                style=${(0,lit_directives_style_map__WEBPACK_IMPORTED_MODULE_3__.styleMap)({\n          display: useRatio || this._loadState === LoadState.Loaded ? \"block\" : \"none\"\n        })}\n              />\n            `}\n        ${this._loadState === LoadState.Error ? lit__WEBPACK_IMPORTED_MODULE_0__.html`<div\n              id=\"brokenImage\"\n              style=${(0,lit_directives_style_map__WEBPACK_IMPORTED_MODULE_3__.styleMap)({\n          height: !useRatio ? `${this._lastImageHeight || \"100\"}px` : undefined\n        })}\n            ></div>` : this.cameraView !== \"live\" && (imageSrc === undefined || this._loadState === LoadState.Loading) ? lit__WEBPACK_IMPORTED_MODULE_0__.html`<div\n              class=\"progress-container\"\n              style=${(0,lit_directives_style_map__WEBPACK_IMPORTED_MODULE_3__.styleMap)({\n          height: !useRatio ? `${this._lastImageHeight || \"100\"}px` : undefined\n        })}\n            >\n              <ha-circular-progress\n                class=\"render-spinner\"\n                active\n                size=\"small\"\n              ></ha-circular-progress>\n            </div>` : \"\"}\n      </div>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_shouldStartCameraUpdates\",\n      value: function _shouldStartCameraUpdates(oldHass) {\n        return !!((!oldHass || oldHass.connected !== this.hass.connected) && this.hass.connected && this.cameraView !== \"live\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_startIntersectionObserverOrUpdates\",\n      value: function _startIntersectionObserverOrUpdates() {\n        if (\"IntersectionObserver\" in window) {\n          if (!this._intersectionObserver) {\n            this._intersectionObserver = new IntersectionObserver(this.handleIntersectionCallback.bind(this));\n          }\n\n          this._intersectionObserver.observe(this);\n        } else {\n          // No support for IntersectionObserver\n          // assume all images are visible\n          this._imageVisible = true;\n\n          this._startUpdateCameraInterval();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_stopIntersectionObserver\",\n      value: function _stopIntersectionObserver() {\n        if (this._intersectionObserver) {\n          this._intersectionObserver.disconnect();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_startUpdateCameraInterval\",\n      value: function _startUpdateCameraInterval() {\n        this._stopUpdateCameraInterval();\n\n        this._updateCameraImageSrc();\n\n        if (this.cameraImage && this.isConnected) {\n          this._cameraUpdater = window.setInterval(() => this._updateCameraImageSrcAtInterval(), UPDATE_INTERVAL);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_stopUpdateCameraInterval\",\n      value: function _stopUpdateCameraInterval() {\n        if (this._cameraUpdater) {\n          clearInterval(this._cameraUpdater);\n          this._cameraUpdater = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_onImageError\",\n      value: function _onImageError() {\n        this._loadState = LoadState.Error;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_onImageLoad\",\n      value: async function _onImageLoad(ev) {\n        this._loadState = LoadState.Loaded;\n        const imgEl = ev.target;\n\n        if (this._ratio && this._ratio.w > 0 && this._ratio.h > 0) {\n          this._loadedImageSrc = imgEl.src;\n        }\n\n        await this.updateComplete;\n        this._lastImageHeight = imgEl.offsetHeight;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updateCameraImageSrcAtInterval\",\n      value: async function _updateCameraImageSrcAtInterval() {\n        // If we hit the interval and it was still loading\n        // it means we timed out so we should show the error.\n        if (this._loadState === LoadState.Loading) {\n          this._onImageError();\n        }\n\n        return this._updateCameraImageSrc();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updateCameraImageSrc\",\n      value: async function _updateCameraImageSrc() {\n        if (!this.hass || !this.cameraImage) {\n          return;\n        }\n\n        const cameraState = this.hass.states[this.cameraImage];\n\n        if (!cameraState) {\n          this._onImageError();\n\n          return;\n        }\n\n        const element_width = this.clientWidth || MAX_IMAGE_WIDTH;\n        let width = Math.ceil(element_width * devicePixelRatio);\n        let height; // If the image has not rendered yet we have no height\n\n        if (!this._lastImageHeight) {\n          if (this._ratio && this._ratio.w > 0 && this._ratio.h > 0) {\n            height = Math.ceil(width * (this._ratio.h / this._ratio.w));\n          } else {\n            // If we don't have a ratio and we don't have a height\n            // we ask for 200% of what we need because the aspect\n            // ratio might result in a smaller image\n            width *= 2;\n            height = Math.ceil(width * ASPECT_RATIO_DEFAULT);\n          }\n        } else {\n          height = Math.ceil(this._lastImageHeight * devicePixelRatio);\n        }\n\n        this._cameraImageSrc = await (0,_data_camera__WEBPACK_IMPORTED_MODULE_7__.fetchThumbnailUrlWithCache)(this.hass, this.cameraImage, width, height);\n\n        if (this._cameraImageSrc === undefined) {\n          this._onImageError();\n        }\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return lit__WEBPACK_IMPORTED_MODULE_0__.css`\n      :host {\n        display: block;\n      }\n\n      .container {\n        transition: filter 0.2s linear;\n      }\n\n      img {\n        display: block;\n        height: auto;\n        width: 100%;\n      }\n\n      .progress-container {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n\n      .ratio {\n        position: relative;\n        width: 100%;\n        height: 0;\n        background-position: center;\n        background-size: cover;\n      }\n\n      .ratio img,\n      .ratio div {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      .ratio img {\n        visibility: hidden;\n      }\n\n      #brokenImage {\n        background: grey url(\"/static/images/image-broken.svg\") center/36px\n          no-repeat;\n      }\n    `;\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_0__.LitElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLWltYWdlLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFXQTtBQURBO0FBQ0E7QUFBQTs7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQVBBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaUJBO0FBQUE7QUFqQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUEyQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbERBO0FBQUE7QUFBQTtBQUFBO0FBcURBOztBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUF6REE7QUFBQTtBQUFBO0FBQUE7QUE0REE7QUFDQTtBQTdEQTtBQUFBO0FBQUE7QUFBQTtBQWdFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFHQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlGQTtBQUFBO0FBQUE7QUFBQTtBQWlHQTtBQUNBO0FBQ0E7O0FBQ0E7QUFHQTtBQUNBOztBQUdBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFSQTtBQWFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFoT0E7QUFBQTtBQUFBO0FBQUE7QUFtT0E7QUFLQTtBQXhPQTtBQUFBO0FBQUE7QUFBQTtBQTJPQTtBQUNBO0FBQ0E7QUFHQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQXhQQTtBQUFBO0FBQUE7QUFBQTtBQTJQQTtBQUNBO0FBQ0E7QUFDQTtBQTlQQTtBQUFBO0FBQUE7QUFBQTtBQWlRQTs7QUFDQTs7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQXpRQTtBQUFBO0FBQUE7QUFBQTtBQTRRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaFJBO0FBQUE7QUFBQTtBQUFBO0FBbVJBO0FBQ0E7QUFwUkE7QUFBQTtBQUFBO0FBQUE7QUF1UkE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBOVJBO0FBQUE7QUFBQTtBQUFBO0FBaVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQXZTQTtBQUFBO0FBQUE7QUFBQTtBQTBTQTtBQUNBO0FBQ0E7O0FBRUE7O0FBSUE7QUFDQTs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQWpWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBb1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5ZQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tcG9uZW50cy9odWktaW1hZ2UudHM/YjNkNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjc3MsXG4gIENTU1Jlc3VsdEdyb3VwLFxuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG59IGZyb20gXCJsaXRcIjtcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5LCBzdGF0ZSB9IGZyb20gXCJsaXQvZGVjb3JhdG9yc1wiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0L2RpcmVjdGl2ZXMvY2xhc3MtbWFwXCI7XG5pbXBvcnQgeyBzdHlsZU1hcCB9IGZyb20gXCJsaXQvZGlyZWN0aXZlcy9zdHlsZS1tYXBcIjtcbmltcG9ydCB7IFNUQVRFU19PRkYgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbnN0XCI7XG5pbXBvcnQgcGFyc2VBc3BlY3RSYXRpbyBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhbWVyYS1zdHJlYW1cIjtcbmltcG9ydCB7IENhbWVyYUVudGl0eSwgZmV0Y2hUaHVtYm5haWxVcmxXaXRoQ2FjaGUgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9jYW1lcmFcIjtcbmltcG9ydCB7IFVOQVZBSUxBQkxFIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvZW50aXR5XCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNpcmN1bGFyLXByb2dyZXNzXCI7XG5cbmNvbnN0IFVQREFURV9JTlRFUlZBTCA9IDEwMDAwO1xuY29uc3QgREVGQVVMVF9GSUxURVIgPSBcImdyYXlzY2FsZSgxMDAlKVwiO1xuXG5jb25zdCBNQVhfSU1BR0VfV0lEVEggPSA2NDA7XG5jb25zdCBBU1BFQ1RfUkFUSU9fREVGQVVMVCA9IDkgLyAxNjtcblxuY29uc3QgZW51bSBMb2FkU3RhdGUge1xuICBMb2FkaW5nID0gMSxcbiAgTG9hZGVkID0gMixcbiAgRXJyb3IgPSAzLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlU3BlY2lmaWNDb25maWcge1xuICBbc3RhdGU6IHN0cmluZ106IHN0cmluZztcbn1cblxuQGN1c3RvbUVsZW1lbnQoXCJodWktaW1hZ2VcIilcbmV4cG9ydCBjbGFzcyBIdWlJbWFnZSBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgZW50aXR5Pzogc3RyaW5nO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBpbWFnZT86IHN0cmluZztcblxuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyBzdGF0ZUltYWdlPzogU3RhdGVTcGVjaWZpY0NvbmZpZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgY2FtZXJhSW1hZ2U/OiBzdHJpbmc7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGNhbWVyYVZpZXc/OiBcImxpdmVcIiB8IFwiYXV0b1wiO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBhc3BlY3RSYXRpbz86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgZmlsdGVyPzogc3RyaW5nO1xuXG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIHN0YXRlRmlsdGVyPzogU3RhdGVTcGVjaWZpY0NvbmZpZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgZGFya01vZGVJbWFnZT86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgZGFya01vZGVGaWx0ZXI/OiBzdHJpbmc7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfaW1hZ2VWaXNpYmxlPyA9IGZhbHNlO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2xvYWRTdGF0ZT86IExvYWRTdGF0ZTtcblxuICBAc3RhdGUoKSBwcml2YXRlIF9jYW1lcmFJbWFnZVNyYz86IHN0cmluZztcblxuICBAc3RhdGUoKSBwcml2YXRlIF9sb2FkZWRJbWFnZVNyYz86IHN0cmluZztcblxuICBwcml2YXRlIF9pbnRlcnNlY3Rpb25PYnNlcnZlcj86IEludGVyc2VjdGlvbk9ic2VydmVyO1xuXG4gIHByaXZhdGUgX2xhc3RJbWFnZUhlaWdodD86IG51bWJlcjtcblxuICBwcml2YXRlIF9jYW1lcmFVcGRhdGVyPzogbnVtYmVyO1xuXG4gIHByaXZhdGUgX3JhdGlvOiB7XG4gICAgdzogbnVtYmVyO1xuICAgIGg6IG51bWJlcjtcbiAgfSB8IG51bGwgPSBudWxsO1xuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIGlmICh0aGlzLl9sb2FkU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fbG9hZFN0YXRlID0gTG9hZFN0YXRlLkxvYWRpbmc7XG4gICAgfVxuICAgIGlmICh0aGlzLmNhbWVyYUltYWdlICYmIHRoaXMuY2FtZXJhVmlldyAhPT0gXCJsaXZlXCIpIHtcbiAgICAgIHRoaXMuX3N0YXJ0SW50ZXJzZWN0aW9uT2JzZXJ2ZXJPclVwZGF0ZXMoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGlzY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9zdG9wVXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTtcbiAgICB0aGlzLl9zdG9wSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKTtcbiAgICB0aGlzLl9pbWFnZVZpc2libGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgaGFuZGxlSW50ZXJzZWN0aW9uQ2FsbGJhY2soZW50cmllczogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeVtdKSB7XG4gICAgdGhpcy5faW1hZ2VWaXNpYmxlID0gZW50cmllc1swXS5pc0ludGVyc2VjdGluZztcbiAgfVxuXG4gIHB1YmxpYyB3aWxsVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikpIHtcbiAgICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuXG4gICAgICBpZiAodGhpcy5fc2hvdWxkU3RhcnRDYW1lcmFVcGRhdGVzKG9sZEhhc3MpKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0SW50ZXJzZWN0aW9uT2JzZXJ2ZXJPclVwZGF0ZXMoKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaGFzcyEuY29ubmVjdGVkKSB7XG4gICAgICAgIHRoaXMuX3N0b3BVcGRhdGVDYW1lcmFJbnRlcnZhbCgpO1xuICAgICAgICB0aGlzLl9zdG9wSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKTtcbiAgICAgICAgdGhpcy5fbG9hZFN0YXRlID0gTG9hZFN0YXRlLkxvYWRpbmc7XG4gICAgICAgIHRoaXMuX2NhbWVyYUltYWdlU3JjID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9sb2FkZWRJbWFnZVNyYyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJfaW1hZ2VWaXNpYmxlXCIpKSB7XG4gICAgICBpZiAodGhpcy5faW1hZ2VWaXNpYmxlKSB7XG4gICAgICAgIGlmICh0aGlzLl9zaG91bGRTdGFydENhbWVyYVVwZGF0ZXMoKSkge1xuICAgICAgICAgIHRoaXMuX3N0YXJ0VXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc3RvcFVwZGF0ZUNhbWVyYUludGVydmFsKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkUHJvcHMuaGFzKFwiYXNwZWN0UmF0aW9cIikpIHtcbiAgICAgIHRoaXMuX3JhdGlvID0gdGhpcy5hc3BlY3RSYXRpb1xuICAgICAgICA/IHBhcnNlQXNwZWN0UmF0aW8odGhpcy5hc3BlY3RSYXRpbylcbiAgICAgICAgOiBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5fbG9hZFN0YXRlID09PSBMb2FkU3RhdGUuTG9hZGluZyAmJiAhdGhpcy5jYW1lcmFJbWFnZSkge1xuICAgICAgdGhpcy5fbG9hZFN0YXRlID0gTG9hZFN0YXRlLkxvYWRlZDtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAoIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG4gICAgY29uc3QgdXNlUmF0aW8gPSBCb29sZWFuKFxuICAgICAgdGhpcy5fcmF0aW8gJiYgdGhpcy5fcmF0aW8udyA+IDAgJiYgdGhpcy5fcmF0aW8uaCA+IDBcbiAgICApO1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5lbnRpdHkgPyB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuZW50aXR5XSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBlbnRpdHlTdGF0ZSA9IHN0YXRlT2JqID8gc3RhdGVPYmouc3RhdGUgOiBVTkFWQUlMQUJMRTtcblxuICAgIC8vIEZpZ3VyZSBvdXQgaW1hZ2Ugc291cmNlIHRvIHVzZVxuICAgIGxldCBpbWFnZVNyYzogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGxldCBjYW1lcmFPYmo6IENhbWVyYUVudGl0eSB8IHVuZGVmaW5lZDtcbiAgICAvLyBUcmFjayBpZiB3ZSBhcmUgd2UgdXNpbmcgYSBmYWxsYmFjayBpbWFnZSwgdXNlZCBmb3IgZmlsdGVyLlxuICAgIGxldCBpbWFnZUZhbGxiYWNrID0gIXRoaXMuc3RhdGVJbWFnZTtcblxuICAgIGlmICh0aGlzLmNhbWVyYUltYWdlKSB7XG4gICAgICBpZiAodGhpcy5jYW1lcmFWaWV3ID09PSBcImxpdmVcIikge1xuICAgICAgICBjYW1lcmFPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuY2FtZXJhSW1hZ2VdIGFzIENhbWVyYUVudGl0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltYWdlU3JjID0gdGhpcy5fY2FtZXJhSW1hZ2VTcmM7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlSW1hZ2UpIHtcbiAgICAgIGNvbnN0IHN0YXRlSW1hZ2UgPSB0aGlzLnN0YXRlSW1hZ2VbZW50aXR5U3RhdGVdO1xuXG4gICAgICBpZiAoc3RhdGVJbWFnZSkge1xuICAgICAgICBpbWFnZVNyYyA9IHN0YXRlSW1hZ2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbWFnZVNyYyA9IHRoaXMuaW1hZ2U7XG4gICAgICAgIGltYWdlRmFsbGJhY2sgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5kYXJrTW9kZUltYWdlICYmIHRoaXMuaGFzcy50aGVtZXMuZGFya01vZGUpIHtcbiAgICAgIGltYWdlU3JjID0gdGhpcy5kYXJrTW9kZUltYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbWFnZVNyYyA9IHRoaXMuaW1hZ2U7XG4gICAgfVxuXG4gICAgaWYgKGltYWdlU3JjKSB7XG4gICAgICBpbWFnZVNyYyA9IHRoaXMuaGFzcy5oYXNzVXJsKGltYWdlU3JjKTtcbiAgICB9XG5cbiAgICAvLyBGaWd1cmUgb3V0IGZpbHRlciB0byB1c2VcbiAgICBsZXQgZmlsdGVyID0gdGhpcy5maWx0ZXIgfHwgXCJcIjtcblxuICAgIGlmICh0aGlzLmhhc3MudGhlbWVzLmRhcmtNb2RlICYmIHRoaXMuZGFya01vZGVGaWx0ZXIpIHtcbiAgICAgIGZpbHRlciArPSB0aGlzLmRhcmtNb2RlRmlsdGVyO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlRmlsdGVyICYmIHRoaXMuc3RhdGVGaWx0ZXJbZW50aXR5U3RhdGVdKSB7XG4gICAgICBmaWx0ZXIgKz0gdGhpcy5zdGF0ZUZpbHRlcltlbnRpdHlTdGF0ZV07XG4gICAgfVxuXG4gICAgaWYgKCFmaWx0ZXIgJiYgdGhpcy5lbnRpdHkpIHtcbiAgICAgIGNvbnN0IGlzT2ZmID0gIXN0YXRlT2JqIHx8IFNUQVRFU19PRkYuaW5jbHVkZXMoZW50aXR5U3RhdGUpO1xuICAgICAgZmlsdGVyID0gaXNPZmYgJiYgaW1hZ2VGYWxsYmFjayA/IERFRkFVTFRfRklMVEVSIDogXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9JHtzdHlsZU1hcCh7XG4gICAgICAgICAgcGFkZGluZ0JvdHRvbTogdXNlUmF0aW9cbiAgICAgICAgICAgID8gYCR7KCgxMDAgKiB0aGlzLl9yYXRpbyEuaCkgLyB0aGlzLl9yYXRpbyEudykudG9GaXhlZCgyKX0lYFxuICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgYmFja2dyb3VuZEltYWdlOlxuICAgICAgICAgICAgdXNlUmF0aW8gJiYgdGhpcy5fbG9hZGVkSW1hZ2VTcmNcbiAgICAgICAgICAgICAgPyBgdXJsKFwiJHt0aGlzLl9sb2FkZWRJbWFnZVNyY31cIilgXG4gICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGZpbHRlcjpcbiAgICAgICAgICAgIHRoaXMuX2xvYWRTdGF0ZSA9PT0gTG9hZFN0YXRlLkxvYWRlZCB8fCB0aGlzLmNhbWVyYVZpZXcgPT09IFwibGl2ZVwiXG4gICAgICAgICAgICAgID8gZmlsdGVyXG4gICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICB9KX1cbiAgICAgICAgY2xhc3M9XCJjb250YWluZXIgJHtjbGFzc01hcCh7XG4gICAgICAgICAgcmF0aW86IHVzZVJhdGlvLFxuICAgICAgICB9KX1cIlxuICAgICAgPlxuICAgICAgICAke3RoaXMuY2FtZXJhSW1hZ2UgJiYgdGhpcy5jYW1lcmFWaWV3ID09PSBcImxpdmVcIlxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGhhLWNhbWVyYS1zdHJlYW1cbiAgICAgICAgICAgICAgICBtdXRlZFxuICAgICAgICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgICAgICAgIC5zdGF0ZU9iaj0ke2NhbWVyYU9ian1cbiAgICAgICAgICAgICAgPjwvaGEtY2FtZXJhLXN0cmVhbT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IGltYWdlU3JjID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IGh0bWxgYFxuICAgICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgIGlkPVwiaW1hZ2VcIlxuICAgICAgICAgICAgICAgIHNyYz0ke2ltYWdlU3JjfVxuICAgICAgICAgICAgICAgIEBlcnJvcj0ke3RoaXMuX29uSW1hZ2VFcnJvcn1cbiAgICAgICAgICAgICAgICBAbG9hZD0ke3RoaXMuX29uSW1hZ2VMb2FkfVxuICAgICAgICAgICAgICAgIHN0eWxlPSR7c3R5bGVNYXAoe1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTpcbiAgICAgICAgICAgICAgICAgICAgdXNlUmF0aW8gfHwgdGhpcy5fbG9hZFN0YXRlID09PSBMb2FkU3RhdGUuTG9hZGVkXG4gICAgICAgICAgICAgICAgICAgICAgPyBcImJsb2NrXCJcbiAgICAgICAgICAgICAgICAgICAgICA6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgYH1cbiAgICAgICAgJHt0aGlzLl9sb2FkU3RhdGUgPT09IExvYWRTdGF0ZS5FcnJvclxuICAgICAgICAgID8gaHRtbGA8ZGl2XG4gICAgICAgICAgICAgIGlkPVwiYnJva2VuSW1hZ2VcIlxuICAgICAgICAgICAgICBzdHlsZT0ke3N0eWxlTWFwKHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICF1c2VSYXRpb1xuICAgICAgICAgICAgICAgICAgPyBgJHt0aGlzLl9sYXN0SW1hZ2VIZWlnaHQgfHwgXCIxMDBcIn1weGBcbiAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgID48L2Rpdj5gXG4gICAgICAgICAgOiB0aGlzLmNhbWVyYVZpZXcgIT09IFwibGl2ZVwiICYmXG4gICAgICAgICAgICAoaW1hZ2VTcmMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLl9sb2FkU3RhdGUgPT09IExvYWRTdGF0ZS5Mb2FkaW5nKVxuICAgICAgICAgID8gaHRtbGA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzPVwicHJvZ3Jlc3MtY29udGFpbmVyXCJcbiAgICAgICAgICAgICAgc3R5bGU9JHtzdHlsZU1hcCh7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAhdXNlUmF0aW9cbiAgICAgICAgICAgICAgICAgID8gYCR7dGhpcy5fbGFzdEltYWdlSGVpZ2h0IHx8IFwiMTAwXCJ9cHhgXG4gICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxoYS1jaXJjdWxhci1wcm9ncmVzc1xuICAgICAgICAgICAgICAgIGNsYXNzPVwicmVuZGVyLXNwaW5uZXJcIlxuICAgICAgICAgICAgICAgIGFjdGl2ZVxuICAgICAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgICAgID48L2hhLWNpcmN1bGFyLXByb2dyZXNzPlxuICAgICAgICAgICAgPC9kaXY+YFxuICAgICAgICAgIDogXCJcIn1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgX3Nob3VsZFN0YXJ0Q2FtZXJhVXBkYXRlcyhvbGRIYXNzPzogSG9tZUFzc2lzdGFudCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIShcbiAgICAgICghb2xkSGFzcyB8fCBvbGRIYXNzLmNvbm5lY3RlZCAhPT0gdGhpcy5oYXNzIS5jb25uZWN0ZWQpICYmXG4gICAgICB0aGlzLmhhc3MhLmNvbm5lY3RlZCAmJlxuICAgICAgdGhpcy5jYW1lcmFWaWV3ICE9PSBcImxpdmVcIlxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9zdGFydEludGVyc2VjdGlvbk9ic2VydmVyT3JVcGRhdGVzKCk6IHZvaWQge1xuICAgIGlmIChcIkludGVyc2VjdGlvbk9ic2VydmVyXCIgaW4gd2luZG93KSB7XG4gICAgICBpZiAoIXRoaXMuX2ludGVyc2VjdGlvbk9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMuX2ludGVyc2VjdGlvbk9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICAgIHRoaXMuaGFuZGxlSW50ZXJzZWN0aW9uQ2FsbGJhY2suYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy5faW50ZXJzZWN0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8gc3VwcG9ydCBmb3IgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcbiAgICAgIC8vIGFzc3VtZSBhbGwgaW1hZ2VzIGFyZSB2aXNpYmxlXG4gICAgICB0aGlzLl9pbWFnZVZpc2libGUgPSB0cnVlO1xuICAgICAgdGhpcy5fc3RhcnRVcGRhdGVDYW1lcmFJbnRlcnZhbCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3N0b3BJbnRlcnNlY3Rpb25PYnNlcnZlcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMuX2ludGVyc2VjdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9zdGFydFVwZGF0ZUNhbWVyYUludGVydmFsKCk6IHZvaWQge1xuICAgIHRoaXMuX3N0b3BVcGRhdGVDYW1lcmFJbnRlcnZhbCgpO1xuICAgIHRoaXMuX3VwZGF0ZUNhbWVyYUltYWdlU3JjKCk7XG4gICAgaWYgKHRoaXMuY2FtZXJhSW1hZ2UgJiYgdGhpcy5pc0Nvbm5lY3RlZCkge1xuICAgICAgdGhpcy5fY2FtZXJhVXBkYXRlciA9IHdpbmRvdy5zZXRJbnRlcnZhbChcbiAgICAgICAgKCkgPT4gdGhpcy5fdXBkYXRlQ2FtZXJhSW1hZ2VTcmNBdEludGVydmFsKCksXG4gICAgICAgIFVQREFURV9JTlRFUlZBTFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9zdG9wVXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2NhbWVyYVVwZGF0ZXIpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fY2FtZXJhVXBkYXRlcik7XG4gICAgICB0aGlzLl9jYW1lcmFVcGRhdGVyID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uSW1hZ2VFcnJvcigpOiB2b2lkIHtcbiAgICB0aGlzLl9sb2FkU3RhdGUgPSBMb2FkU3RhdGUuRXJyb3I7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9vbkltYWdlTG9hZChldjogRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLl9sb2FkU3RhdGUgPSBMb2FkU3RhdGUuTG9hZGVkO1xuICAgIGNvbnN0IGltZ0VsID0gZXYudGFyZ2V0IGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgaWYgKHRoaXMuX3JhdGlvICYmIHRoaXMuX3JhdGlvLncgPiAwICYmIHRoaXMuX3JhdGlvLmggPiAwKSB7XG4gICAgICB0aGlzLl9sb2FkZWRJbWFnZVNyYyA9IGltZ0VsLnNyYztcbiAgICB9XG4gICAgYXdhaXQgdGhpcy51cGRhdGVDb21wbGV0ZTtcbiAgICB0aGlzLl9sYXN0SW1hZ2VIZWlnaHQgPSBpbWdFbC5vZmZzZXRIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF91cGRhdGVDYW1lcmFJbWFnZVNyY0F0SW50ZXJ2YWwoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gSWYgd2UgaGl0IHRoZSBpbnRlcnZhbCBhbmQgaXQgd2FzIHN0aWxsIGxvYWRpbmdcbiAgICAvLyBpdCBtZWFucyB3ZSB0aW1lZCBvdXQgc28gd2Ugc2hvdWxkIHNob3cgdGhlIGVycm9yLlxuICAgIGlmICh0aGlzLl9sb2FkU3RhdGUgPT09IExvYWRTdGF0ZS5Mb2FkaW5nKSB7XG4gICAgICB0aGlzLl9vbkltYWdlRXJyb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUNhbWVyYUltYWdlU3JjKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF91cGRhdGVDYW1lcmFJbWFnZVNyYygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuaGFzcyB8fCAhdGhpcy5jYW1lcmFJbWFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNhbWVyYVN0YXRlID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLmNhbWVyYUltYWdlXSBhc1xuICAgICAgfCBDYW1lcmFFbnRpdHlcbiAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFjYW1lcmFTdGF0ZSkge1xuICAgICAgdGhpcy5fb25JbWFnZUVycm9yKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZWxlbWVudF93aWR0aCA9IHRoaXMuY2xpZW50V2lkdGggfHwgTUFYX0lNQUdFX1dJRFRIO1xuICAgIGxldCB3aWR0aCA9IE1hdGguY2VpbChlbGVtZW50X3dpZHRoICogZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgbGV0IGhlaWdodDogbnVtYmVyO1xuICAgIC8vIElmIHRoZSBpbWFnZSBoYXMgbm90IHJlbmRlcmVkIHlldCB3ZSBoYXZlIG5vIGhlaWdodFxuICAgIGlmICghdGhpcy5fbGFzdEltYWdlSGVpZ2h0KSB7XG4gICAgICBpZiAodGhpcy5fcmF0aW8gJiYgdGhpcy5fcmF0aW8udyA+IDAgJiYgdGhpcy5fcmF0aW8uaCA+IDApIHtcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5jZWlsKHdpZHRoICogKHRoaXMuX3JhdGlvLmggLyB0aGlzLl9yYXRpby53KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgcmF0aW8gYW5kIHdlIGRvbid0IGhhdmUgYSBoZWlnaHRcbiAgICAgICAgLy8gd2UgYXNrIGZvciAyMDAlIG9mIHdoYXQgd2UgbmVlZCBiZWNhdXNlIHRoZSBhc3BlY3RcbiAgICAgICAgLy8gcmF0aW8gbWlnaHQgcmVzdWx0IGluIGEgc21hbGxlciBpbWFnZVxuICAgICAgICB3aWR0aCAqPSAyO1xuICAgICAgICBoZWlnaHQgPSBNYXRoLmNlaWwod2lkdGggKiBBU1BFQ1RfUkFUSU9fREVGQVVMVCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGhlaWdodCA9IE1hdGguY2VpbCh0aGlzLl9sYXN0SW1hZ2VIZWlnaHQgKiBkZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB9XG4gICAgdGhpcy5fY2FtZXJhSW1hZ2VTcmMgPSBhd2FpdCBmZXRjaFRodW1ibmFpbFVybFdpdGhDYWNoZShcbiAgICAgIHRoaXMuaGFzcyxcbiAgICAgIHRoaXMuY2FtZXJhSW1hZ2UsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgICk7XG4gICAgaWYgKHRoaXMuX2NhbWVyYUltYWdlU3JjID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX29uSW1hZ2VFcnJvcigpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdEdyb3VwIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cblxuICAgICAgLmNvbnRhaW5lciB7XG4gICAgICAgIHRyYW5zaXRpb246IGZpbHRlciAwLjJzIGxpbmVhcjtcbiAgICAgIH1cblxuICAgICAgaW1nIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG5cbiAgICAgIC5wcm9ncmVzcy1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnJhdGlvIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAwO1xuICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7XG4gICAgICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbyBpbWcsXG4gICAgICAucmF0aW8gZGl2IHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbyBpbWcge1xuICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgICNicm9rZW5JbWFnZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IGdyZXkgdXJsKFwiL3N0YXRpYy9pbWFnZXMvaW1hZ2UtYnJva2VuLnN2Z1wiKSBjZW50ZXIvMzZweFxuICAgICAgICAgIG5vLXJlcGVhdDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaW1hZ2VcIjogSHVpSW1hZ2U7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/panels/lovelace/components/hui-image.ts\n");

/***/ })

}]);