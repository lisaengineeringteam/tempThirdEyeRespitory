"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_panels_lovelace_common_generate-lovelace-config_ts"],{

/***/ "./src/common/entity/split_by_groups.ts":
/*!**********************************************!*\
  !*** ./src/common/entity/split_by_groups.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"splitByGroups\": () => (/* binding */ splitByGroups)\n/* harmony export */ });\n/* harmony import */ var _compute_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./compute_domain */ \"./src/common/entity/compute_domain.ts\");\n // Split a collection into a list of groups and a 'rest' list of ungrouped\n// entities.\n// Returns { groups: [], ungrouped: {} }\n\nconst splitByGroups = entities => {\n  const groups = [];\n  const ungrouped = {};\n  Object.keys(entities).forEach(entityId => {\n    const entity = entities[entityId];\n\n    if ((0,_compute_domain__WEBPACK_IMPORTED_MODULE_0__.computeDomain)(entityId) === \"group\") {\n      groups.push(entity);\n    } else {\n      ungrouped[entityId] = entity;\n    }\n  });\n  groups.forEach(group => group.attributes.entity_id.forEach(entityId => {\n    delete ungrouped[entityId];\n  }));\n  return {\n    groups,\n    ungrouped\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2VudGl0eS9zcGxpdF9ieV9ncm91cHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFQTtBQUdBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tbW9uL2VudGl0eS9zcGxpdF9ieV9ncm91cHMudHM/ZjBhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIYXNzRW50aXRpZXMgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBHcm91cEVudGl0eSB9IGZyb20gXCIuLi8uLi9kYXRhL2dyb3VwXCI7XG5pbXBvcnQgeyBjb21wdXRlRG9tYWluIH0gZnJvbSBcIi4vY29tcHV0ZV9kb21haW5cIjtcblxuLy8gU3BsaXQgYSBjb2xsZWN0aW9uIGludG8gYSBsaXN0IG9mIGdyb3VwcyBhbmQgYSAncmVzdCcgbGlzdCBvZiB1bmdyb3VwZWRcbi8vIGVudGl0aWVzLlxuLy8gUmV0dXJucyB7IGdyb3VwczogW10sIHVuZ3JvdXBlZDoge30gfVxuZXhwb3J0IGNvbnN0IHNwbGl0QnlHcm91cHMgPSAoZW50aXRpZXM6IEhhc3NFbnRpdGllcykgPT4ge1xuICBjb25zdCBncm91cHM6IEdyb3VwRW50aXR5W10gPSBbXTtcbiAgY29uc3QgdW5ncm91cGVkOiBIYXNzRW50aXRpZXMgPSB7fTtcblxuICBPYmplY3Qua2V5cyhlbnRpdGllcykuZm9yRWFjaCgoZW50aXR5SWQpID0+IHtcbiAgICBjb25zdCBlbnRpdHkgPSBlbnRpdGllc1tlbnRpdHlJZF07XG5cbiAgICBpZiAoY29tcHV0ZURvbWFpbihlbnRpdHlJZCkgPT09IFwiZ3JvdXBcIikge1xuICAgICAgZ3JvdXBzLnB1c2goZW50aXR5IGFzIEdyb3VwRW50aXR5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5ncm91cGVkW2VudGl0eUlkXSA9IGVudGl0eTtcbiAgICB9XG4gIH0pO1xuXG4gIGdyb3Vwcy5mb3JFYWNoKChncm91cCkgPT5cbiAgICBncm91cC5hdHRyaWJ1dGVzLmVudGl0eV9pZC5mb3JFYWNoKChlbnRpdHlJZCkgPT4ge1xuICAgICAgZGVsZXRlIHVuZ3JvdXBlZFtlbnRpdHlJZF07XG4gICAgfSlcbiAgKTtcblxuICByZXR1cm4geyBncm91cHMsIHVuZ3JvdXBlZCB9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/entity/split_by_groups.ts\n");

/***/ }),

/***/ "./src/common/entity/strip_prefix_from_entity_name.ts":
/*!************************************************************!*\
  !*** ./src/common/entity/strip_prefix_from_entity_name.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"stripPrefixFromEntityName\": () => (/* binding */ stripPrefixFromEntityName)\n/* harmony export */ });\nconst SUFFIXES = [\" \", \": \"];\n/**\n * Strips a device name from an entity name.\n * @param entityName the entity name\n * @param lowerCasedPrefix the prefix to strip, lower cased\n * @returns\n */\n\nconst stripPrefixFromEntityName = (entityName, lowerCasedPrefix) => {\n  const lowerCasedEntityName = entityName.toLowerCase();\n\n  for (const suffix of SUFFIXES) {\n    const lowerCasedPrefixWithSuffix = `${lowerCasedPrefix}${suffix}`;\n\n    if (lowerCasedEntityName.startsWith(lowerCasedPrefixWithSuffix)) {\n      const newName = entityName.substring(lowerCasedPrefixWithSuffix.length); // If first word already has an upper case letter (e.g. from brand name)\n      // leave as-is, otherwise capitalize the first word.\n\n      return hasUpperCase(newName.substr(0, newName.indexOf(\" \"))) ? newName : newName[0].toUpperCase() + newName.slice(1);\n    }\n  }\n\n  return undefined;\n};\n\nconst hasUpperCase = str => str.toLowerCase() !== str;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2VudGl0eS9zdHJpcF9wcmVmaXhfZnJvbV9lbnRpdHlfbmFtZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFJQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFHQTs7QUFDQTtBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2NvbW1vbi9lbnRpdHkvc3RyaXBfcHJlZml4X2Zyb21fZW50aXR5X25hbWUudHM/NGY4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTVUZGSVhFUyA9IFtcIiBcIiwgXCI6IFwiXTtcblxuLyoqXG4gKiBTdHJpcHMgYSBkZXZpY2UgbmFtZSBmcm9tIGFuIGVudGl0eSBuYW1lLlxuICogQHBhcmFtIGVudGl0eU5hbWUgdGhlIGVudGl0eSBuYW1lXG4gKiBAcGFyYW0gbG93ZXJDYXNlZFByZWZpeCB0aGUgcHJlZml4IHRvIHN0cmlwLCBsb3dlciBjYXNlZFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGNvbnN0IHN0cmlwUHJlZml4RnJvbUVudGl0eU5hbWUgPSAoXG4gIGVudGl0eU5hbWU6IHN0cmluZyxcbiAgbG93ZXJDYXNlZFByZWZpeDogc3RyaW5nXG4pID0+IHtcbiAgY29uc3QgbG93ZXJDYXNlZEVudGl0eU5hbWUgPSBlbnRpdHlOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgZm9yIChjb25zdCBzdWZmaXggb2YgU1VGRklYRVMpIHtcbiAgICBjb25zdCBsb3dlckNhc2VkUHJlZml4V2l0aFN1ZmZpeCA9IGAke2xvd2VyQ2FzZWRQcmVmaXh9JHtzdWZmaXh9YDtcblxuICAgIGlmIChsb3dlckNhc2VkRW50aXR5TmFtZS5zdGFydHNXaXRoKGxvd2VyQ2FzZWRQcmVmaXhXaXRoU3VmZml4KSkge1xuICAgICAgY29uc3QgbmV3TmFtZSA9IGVudGl0eU5hbWUuc3Vic3RyaW5nKGxvd2VyQ2FzZWRQcmVmaXhXaXRoU3VmZml4Lmxlbmd0aCk7XG5cbiAgICAgIC8vIElmIGZpcnN0IHdvcmQgYWxyZWFkeSBoYXMgYW4gdXBwZXIgY2FzZSBsZXR0ZXIgKGUuZy4gZnJvbSBicmFuZCBuYW1lKVxuICAgICAgLy8gbGVhdmUgYXMtaXMsIG90aGVyd2lzZSBjYXBpdGFsaXplIHRoZSBmaXJzdCB3b3JkLlxuICAgICAgcmV0dXJuIGhhc1VwcGVyQ2FzZShuZXdOYW1lLnN1YnN0cigwLCBuZXdOYW1lLmluZGV4T2YoXCIgXCIpKSlcbiAgICAgICAgPyBuZXdOYW1lXG4gICAgICAgIDogbmV3TmFtZVswXS50b1VwcGVyQ2FzZSgpICsgbmV3TmFtZS5zbGljZSgxKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuY29uc3QgaGFzVXBwZXJDYXNlID0gKHN0cjogc3RyaW5nKTogYm9vbGVhbiA9PiBzdHIudG9Mb3dlckNhc2UoKSAhPT0gc3RyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/common/entity/strip_prefix_from_entity_name.ts\n");

/***/ }),

/***/ "./src/data/user.ts":
/*!**************************!*\
  !*** ./src/data/user.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SYSTEM_GROUP_ID_ADMIN\": () => (/* binding */ SYSTEM_GROUP_ID_ADMIN),\n/* harmony export */   \"SYSTEM_GROUP_ID_USER\": () => (/* binding */ SYSTEM_GROUP_ID_USER),\n/* harmony export */   \"SYSTEM_GROUP_ID_READ_ONLY\": () => (/* binding */ SYSTEM_GROUP_ID_READ_ONLY),\n/* harmony export */   \"GROUPS\": () => (/* binding */ GROUPS),\n/* harmony export */   \"fetchUsers\": () => (/* binding */ fetchUsers),\n/* harmony export */   \"createUser\": () => (/* binding */ createUser),\n/* harmony export */   \"updateUser\": () => (/* binding */ updateUser),\n/* harmony export */   \"deleteUser\": () => (/* binding */ deleteUser),\n/* harmony export */   \"computeUserInitials\": () => (/* binding */ computeUserInitials),\n/* harmony export */   \"computeUserBadges\": () => (/* binding */ computeUserBadges)\n/* harmony export */ });\nconst mdiCrownCircleOutline = \"M12 2C6.47 2 2 6.5 2 12C2 17.5 6.5 22 12 22S22 17.5 22 12 17.5 2 12 2M12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4S20 7.58 20 12C20 16.42 16.42 20 12 20M8 14L7 8L10 10L12 7L14 10L17 8L16 14H8M8.56 16C8.22 16 8 15.78 8 15.44V15H16V15.44C16 15.78 15.78 16 15.44 16H8.56Z\";\nconst mdiAlphaSCircleOutline = \"M11,7H15V9H11V11H13A2,2 0 0,1 15,13V15A2,2 0 0,1 13,17H9V15H13V13H11A2,2 0 0,1 9,11V9A2,2 0 0,1 11,7M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z\";\nconst mdiHomeCircleOutline = \"M12 20C7.6 20 4 16.4 4 12S7.6 4 12 4 20 7.6 20 12 16.4 20 12 20M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M11 14H13V17H16V12H18L12 7L6 12H8V17H11V14\";\nconst mdiCancel = \"M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z\";\nconst SYSTEM_GROUP_ID_ADMIN = \"system-admin\";\nconst SYSTEM_GROUP_ID_USER = \"system-users\";\nconst SYSTEM_GROUP_ID_READ_ONLY = \"system-read-only\";\nconst GROUPS = [SYSTEM_GROUP_ID_USER, SYSTEM_GROUP_ID_ADMIN];\nconst fetchUsers = async hass => hass.callWS({\n  type: \"config/auth/list\"\n});\nconst createUser = async (hass, name, group_ids, local_only) => hass.callWS({\n  type: \"config/auth/create\",\n  name,\n  group_ids,\n  local_only\n});\nconst updateUser = async (hass, userId, params) => hass.callWS({ ...params,\n  type: \"config/auth/update\",\n  user_id: userId\n});\nconst deleteUser = async (hass, userId) => hass.callWS({\n  type: \"config/auth/delete\",\n  user_id: userId\n});\nconst computeUserInitials = name => {\n  if (!name) {\n    return \"?\";\n  }\n\n  return name.trim() // Split by space and take first 3 words\n  .split(\" \").slice(0, 3) // Of each word, take first letter\n  .map(s => s.substring(0, 1)).join(\"\");\n};\nconst OWNER_ICON = mdiCrownCircleOutline;\nconst SYSTEM_ICON = mdiAlphaSCircleOutline;\nconst LOCAL_ICON = mdiHomeCircleOutline;\nconst DISABLED_ICON = mdiCancel;\nconst computeUserBadges = (hass, user, includeSystem) => {\n  const labels = [];\n\n  const translate = key => hass.localize(`ui.panel.config.users.${key}`);\n\n  if (user.is_owner) {\n    labels.push([OWNER_ICON, translate(\"is_owner\")]);\n  }\n\n  if (includeSystem && user.system_generated) {\n    labels.push([SYSTEM_ICON, translate(\"is_system\")]);\n  }\n\n  if (user.local_only) {\n    labels.push([LOCAL_ICON, translate(\"is_local\")]);\n  }\n\n  if (!user.is_active) {\n    labels.push([DISABLED_ICON, translate(\"is_not_active\")]);\n  }\n\n  return labels;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS91c2VyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBO0FBRUE7QUFxQkE7QUFFQTtBQURBO0FBSUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFPQTtBQUNBO0FBSEE7QUFNQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFBQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBOztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvZGF0YS91c2VyLnRzPzgyNGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgbWRpQ3Jvd25DaXJjbGVPdXRsaW5lLFxuICBtZGlBbHBoYVNDaXJjbGVPdXRsaW5lLFxuICBtZGlIb21lQ2lyY2xlT3V0bGluZSxcbiAgbWRpQ2FuY2VsLFxufSBmcm9tIFwiQG1kaS9qc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgQ3JlZGVudGlhbCB9IGZyb20gXCIuL2F1dGhcIjtcblxuZXhwb3J0IGNvbnN0IFNZU1RFTV9HUk9VUF9JRF9BRE1JTiA9IFwic3lzdGVtLWFkbWluXCI7XG5leHBvcnQgY29uc3QgU1lTVEVNX0dST1VQX0lEX1VTRVIgPSBcInN5c3RlbS11c2Vyc1wiO1xuZXhwb3J0IGNvbnN0IFNZU1RFTV9HUk9VUF9JRF9SRUFEX09OTFkgPSBcInN5c3RlbS1yZWFkLW9ubHlcIjtcblxuZXhwb3J0IGNvbnN0IEdST1VQUyA9IFtTWVNURU1fR1JPVVBfSURfVVNFUiwgU1lTVEVNX0dST1VQX0lEX0FETUlOXTtcblxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcm5hbWU6IHN0cmluZyB8IG51bGw7XG4gIG5hbWU6IHN0cmluZztcbiAgaXNfb3duZXI6IGJvb2xlYW47XG4gIGlzX2FjdGl2ZTogYm9vbGVhbjtcbiAgbG9jYWxfb25seTogYm9vbGVhbjtcbiAgc3lzdGVtX2dlbmVyYXRlZDogYm9vbGVhbjtcbiAgZ3JvdXBfaWRzOiBzdHJpbmdbXTtcbiAgY3JlZGVudGlhbHM6IENyZWRlbnRpYWxbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVVc2VyUGFyYW1zIHtcbiAgbmFtZT86IFVzZXJbXCJuYW1lXCJdO1xuICBpc19hY3RpdmU/OiBVc2VyW1wiaXNfYWN0aXZlXCJdO1xuICBncm91cF9pZHM/OiBVc2VyW1wiZ3JvdXBfaWRzXCJdO1xuICBsb2NhbF9vbmx5PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGZldGNoVXNlcnMgPSBhc3luYyAoaGFzczogSG9tZUFzc2lzdGFudCkgPT5cbiAgaGFzcy5jYWxsV1M8VXNlcltdPih7XG4gICAgdHlwZTogXCJjb25maWcvYXV0aC9saXN0XCIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlVXNlciA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgbmFtZTogc3RyaW5nLFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmU6IHZhcmlhYmxlLW5hbWVcbiAgZ3JvdXBfaWRzPzogVXNlcltcImdyb3VwX2lkc1wiXSxcbiAgbG9jYWxfb25seT86IGJvb2xlYW5cbikgPT5cbiAgaGFzcy5jYWxsV1M8eyB1c2VyOiBVc2VyIH0+KHtcbiAgICB0eXBlOiBcImNvbmZpZy9hdXRoL2NyZWF0ZVwiLFxuICAgIG5hbWUsXG4gICAgZ3JvdXBfaWRzLFxuICAgIGxvY2FsX29ubHksXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHBhcmFtczogVXBkYXRlVXNlclBhcmFtc1xuKSA9PlxuICBoYXNzLmNhbGxXUzx7IHVzZXI6IFVzZXIgfT4oe1xuICAgIC4uLnBhcmFtcyxcbiAgICB0eXBlOiBcImNvbmZpZy9hdXRoL3VwZGF0ZVwiLFxuICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBkZWxldGVVc2VyID0gYXN5bmMgKGhhc3M6IEhvbWVBc3Npc3RhbnQsIHVzZXJJZDogc3RyaW5nKSA9PlxuICBoYXNzLmNhbGxXUzx2b2lkPih7XG4gICAgdHlwZTogXCJjb25maWcvYXV0aC9kZWxldGVcIixcbiAgICB1c2VyX2lkOiB1c2VySWQsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY29tcHV0ZVVzZXJJbml0aWFscyA9IChuYW1lOiBzdHJpbmcpID0+IHtcbiAgaWYgKCFuYW1lKSB7XG4gICAgcmV0dXJuIFwiP1wiO1xuICB9XG4gIHJldHVybiAoXG4gICAgbmFtZVxuICAgICAgLnRyaW0oKVxuICAgICAgLy8gU3BsaXQgYnkgc3BhY2UgYW5kIHRha2UgZmlyc3QgMyB3b3Jkc1xuICAgICAgLnNwbGl0KFwiIFwiKVxuICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAvLyBPZiBlYWNoIHdvcmQsIHRha2UgZmlyc3QgbGV0dGVyXG4gICAgICAubWFwKChzKSA9PiBzLnN1YnN0cmluZygwLCAxKSlcbiAgICAgIC5qb2luKFwiXCIpXG4gICk7XG59O1xuXG5jb25zdCBPV05FUl9JQ09OID0gbWRpQ3Jvd25DaXJjbGVPdXRsaW5lO1xuY29uc3QgU1lTVEVNX0lDT04gPSBtZGlBbHBoYVNDaXJjbGVPdXRsaW5lO1xuY29uc3QgTE9DQUxfSUNPTiA9IG1kaUhvbWVDaXJjbGVPdXRsaW5lO1xuY29uc3QgRElTQUJMRURfSUNPTiA9IG1kaUNhbmNlbDtcblxuZXhwb3J0IGNvbnN0IGNvbXB1dGVVc2VyQmFkZ2VzID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICB1c2VyOiBVc2VyLFxuICBpbmNsdWRlU3lzdGVtOiBib29sZWFuXG4pID0+IHtcbiAgY29uc3QgbGFiZWxzOiBbc3RyaW5nLCBzdHJpbmddW10gPSBbXTtcbiAgY29uc3QgdHJhbnNsYXRlID0gKGtleSkgPT4gaGFzcy5sb2NhbGl6ZShgdWkucGFuZWwuY29uZmlnLnVzZXJzLiR7a2V5fWApO1xuXG4gIGlmICh1c2VyLmlzX293bmVyKSB7XG4gICAgbGFiZWxzLnB1c2goW09XTkVSX0lDT04sIHRyYW5zbGF0ZShcImlzX293bmVyXCIpXSk7XG4gIH1cbiAgaWYgKGluY2x1ZGVTeXN0ZW0gJiYgdXNlci5zeXN0ZW1fZ2VuZXJhdGVkKSB7XG4gICAgbGFiZWxzLnB1c2goW1NZU1RFTV9JQ09OLCB0cmFuc2xhdGUoXCJpc19zeXN0ZW1cIildKTtcbiAgfVxuICBpZiAodXNlci5sb2NhbF9vbmx5KSB7XG4gICAgbGFiZWxzLnB1c2goW0xPQ0FMX0lDT04sIHRyYW5zbGF0ZShcImlzX2xvY2FsXCIpXSk7XG4gIH1cbiAgaWYgKCF1c2VyLmlzX2FjdGl2ZSkge1xuICAgIGxhYmVscy5wdXNoKFtESVNBQkxFRF9JQ09OLCB0cmFuc2xhdGUoXCJpc19ub3RfYWN0aXZlXCIpXSk7XG4gIH1cblxuICByZXR1cm4gbGFiZWxzO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/data/user.ts\n");

/***/ }),

/***/ "./src/panels/config/helpers/const.ts":
/*!********************************************!*\
  !*** ./src/panels/config/helpers/const.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HELPER_DOMAINS\": () => (/* binding */ HELPER_DOMAINS)\n/* harmony export */ });\nconst HELPER_DOMAINS = [\"input_boolean\", \"input_button\", \"input_text\", \"input_number\", \"input_datetime\", \"input_select\", \"counter\", \"timer\"];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2NvbmZpZy9oZWxwZXJzL2NvbnN0LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFTQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL3BhbmVscy9jb25maWcvaGVscGVycy9jb25zdC50cz8xMTVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQ291bnRlciB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2NvdW50ZXJcIjtcbmltcG9ydCB0eXBlIHsgSW5wdXRCb29sZWFuIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW5wdXRfYm9vbGVhblwiO1xuaW1wb3J0IHR5cGUgeyBJbnB1dEJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2lucHV0X2J1dHRvblwiO1xuaW1wb3J0IHR5cGUgeyBJbnB1dERhdGVUaW1lIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW5wdXRfZGF0ZXRpbWVcIjtcbmltcG9ydCB0eXBlIHsgSW5wdXROdW1iZXIgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9pbnB1dF9udW1iZXJcIjtcbmltcG9ydCB0eXBlIHsgSW5wdXRTZWxlY3QgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9pbnB1dF9zZWxlY3RcIjtcbmltcG9ydCB0eXBlIHsgSW5wdXRUZXh0IH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW5wdXRfdGV4dFwiO1xuaW1wb3J0IHR5cGUgeyBUaW1lciB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL3RpbWVyXCI7XG5cbmV4cG9ydCBjb25zdCBIRUxQRVJfRE9NQUlOUyA9IFtcbiAgXCJpbnB1dF9ib29sZWFuXCIsXG4gIFwiaW5wdXRfYnV0dG9uXCIsXG4gIFwiaW5wdXRfdGV4dFwiLFxuICBcImlucHV0X251bWJlclwiLFxuICBcImlucHV0X2RhdGV0aW1lXCIsXG4gIFwiaW5wdXRfc2VsZWN0XCIsXG4gIFwiY291bnRlclwiLFxuICBcInRpbWVyXCIsXG5dO1xuXG5leHBvcnQgdHlwZSBIZWxwZXIgPVxuICB8IElucHV0Qm9vbGVhblxuICB8IElucHV0QnV0dG9uXG4gIHwgSW5wdXRUZXh0XG4gIHwgSW5wdXROdW1iZXJcbiAgfCBJbnB1dFNlbGVjdFxuICB8IElucHV0RGF0ZVRpbWVcbiAgfCBDb3VudGVyXG4gIHwgVGltZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/panels/config/helpers/const.ts\n");

/***/ }),

/***/ "./src/panels/lovelace/common/generate-lovelace-config.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/common/generate-lovelace-config.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"computeCards\": () => (/* binding */ computeCards),\n/* harmony export */   \"generateViewConfig\": () => (/* binding */ generateViewConfig),\n/* harmony export */   \"generateDefaultViewConfig\": () => (/* binding */ generateDefaultViewConfig)\n/* harmony export */ });\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/entity/compute_state_domain */ \"./src/common/entity/compute_state_domain.ts\");\n/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ \"./src/common/entity/compute_state_name.ts\");\n/* harmony import */ var _common_entity_split_by_groups__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/entity/split_by_groups */ \"./src/common/entity/split_by_groups.ts\");\n/* harmony import */ var _common_entity_strip_prefix_from_entity_name__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/strip_prefix_from_entity_name */ \"./src/common/entity/strip_prefix_from_entity_name.ts\");\n/* harmony import */ var _common_string_compare__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/string/compare */ \"./src/common/string/compare.ts\");\n/* harmony import */ var _data_integration__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/integration */ \"./src/data/integration.ts\");\n/* harmony import */ var _data_sensor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../data/sensor */ \"./src/data/sensor.ts\");\n/* harmony import */ var _data_user__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../data/user */ \"./src/data/user.ts\");\n/* harmony import */ var _config_helpers_const__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../config/helpers/const */ \"./src/panels/config/helpers/const.ts\");\n\n\n\n\n\n\n\n\n\n\nconst HIDE_DOMAIN = new Set([\"automation\", \"configurator\", \"device_tracker\", \"geo_location\", \"persistent_notification\", \"script\", \"sun\", \"zone\"]);\nconst HIDE_PLATFORM = new Set([\"mobile_app\"]);\n\nconst splitByAreas = (areaEntries, deviceEntries, entityEntries, entities) => {\n  const allEntities = { ...entities\n  };\n  const areasWithEntities = [];\n\n  for (const area of areaEntries) {\n    const areaEntities = [];\n    const areaDevices = new Set(deviceEntries.filter(device => device.area_id === area.area_id).map(device => device.id));\n\n    for (const entity of entityEntries) {\n      if ((areaDevices.has( // @ts-ignore\n      entity.device_id) && !entity.area_id || entity.area_id === area.area_id) && entity.entity_id in allEntities) {\n        areaEntities.push(allEntities[entity.entity_id]);\n        delete allEntities[entity.entity_id];\n      }\n    }\n\n    if (areaEntities.length > 0) {\n      areasWithEntities.push([area, areaEntities]);\n    }\n  }\n\n  return {\n    areasWithEntities,\n    otherEntities: allEntities\n  };\n};\n\nconst computeCards = (states, entityCardOptions, renderFooterEntities = true) => {\n  const cards = []; // For entity card\n\n  const entities = [];\n  const titlePrefix = entityCardOptions.title ? entityCardOptions.title.toLowerCase() : undefined;\n  const footerEntities = [];\n\n  for (const [entityId, stateObj] of states) {\n    const domain = (0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_0__.computeDomain)(entityId);\n\n    if (domain === \"alarm_control_panel\") {\n      const cardConfig = {\n        type: \"alarm-panel\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"camera\") {\n      const cardConfig = {\n        type: \"picture-entity\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"climate\") {\n      const cardConfig = {\n        type: \"thermostat\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"humidifier\") {\n      const cardConfig = {\n        type: \"humidifier\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"media_player\") {\n      const cardConfig = {\n        type: \"media-control\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"plant\") {\n      const cardConfig = {\n        type: \"plant-status\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"weather\") {\n      const cardConfig = {\n        type: \"weather-forecast\",\n        entity: entityId,\n        show_forecast: false\n      };\n      cards.push(cardConfig);\n    } else if (renderFooterEntities && (domain === \"scene\" || domain === \"script\")) {\n      const conf = {\n        entity: entityId,\n        show_icon: true,\n        show_name: true\n      };\n      let name;\n\n      if (titlePrefix && stateObj && (name = (0,_common_entity_strip_prefix_from_entity_name__WEBPACK_IMPORTED_MODULE_4__.stripPrefixFromEntityName)((0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__.computeStateName)(stateObj), titlePrefix))) {\n        conf.name = name;\n      }\n\n      footerEntities.push(conf);\n    } else if (domain === \"sensor\" && (stateObj === null || stateObj === void 0 ? void 0 : stateObj.attributes.device_class) === _data_sensor__WEBPACK_IMPORTED_MODULE_7__.SENSOR_DEVICE_CLASS_BATTERY) {// Do nothing.\n    } else {\n      let name;\n      const entityConf = titlePrefix && stateObj && (name = (0,_common_entity_strip_prefix_from_entity_name__WEBPACK_IMPORTED_MODULE_4__.stripPrefixFromEntityName)((0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__.computeStateName)(stateObj), titlePrefix)) ? {\n        entity: entityId,\n        name\n      } : entityId;\n      entities.push(entityConf);\n    }\n  } // If we ended up with footer entities but no normal entities,\n  // render the footer entities as normal entities.\n\n\n  if (entities.length === 0 && footerEntities.length > 0) {\n    return computeCards(states, entityCardOptions, false);\n  }\n\n  if (entities.length > 0 || footerEntities.length > 0) {\n    const card = {\n      type: \"entities\",\n      entities,\n      ...entityCardOptions\n    };\n\n    if (footerEntities.length > 0) {\n      card.footer = {\n        type: \"buttons\",\n        entities: footerEntities\n      };\n    }\n\n    cards.unshift(card);\n  }\n\n  if (cards.length < 2) {\n    return cards;\n  }\n\n  return [{\n    type: \"grid\",\n    square: false,\n    columns: 1,\n    cards\n  }];\n};\n\nconst computeDefaultViewStates = (entities, entityEntries) => {\n  const states = {};\n  const hiddenEntities = new Set(entityEntries.filter(entry => entry.entity_category || HIDE_PLATFORM.has(entry.platform) || entry.hidden_by).map(entry => entry.entity_id));\n  Object.keys(entities).forEach(entityId => {\n    const stateObj = entities[entityId];\n\n    if (!HIDE_DOMAIN.has((0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_1__.computeStateDomain)(stateObj)) && !hiddenEntities.has(stateObj.entity_id)) {\n      states[entityId] = entities[entityId];\n    }\n  });\n  return states;\n};\n\nconst generateViewConfig = (localize, path, title, icon, entities, groupOrders) => {\n  const splitted = (0,_common_entity_split_by_groups__WEBPACK_IMPORTED_MODULE_3__.splitByGroups)(entities);\n  splitted.groups.sort((gr1, gr2) => groupOrders[gr1.entity_id] - groupOrders[gr2.entity_id]);\n  const ungroupedEntitites = {}; // Organize ungrouped entities in ungrouped things\n\n  Object.keys(splitted.ungrouped).forEach(entityId => {\n    const state = splitted.ungrouped[entityId];\n    const domain = (0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_1__.computeStateDomain)(state);\n\n    if (!(domain in ungroupedEntitites)) {\n      ungroupedEntitites[domain] = [];\n    }\n\n    ungroupedEntitites[domain].push(state.entity_id);\n  });\n  const cards = [];\n\n  if (\"person\" in ungroupedEntitites) {\n    const personCards = [];\n\n    if (ungroupedEntitites.person.length === 1) {\n      cards.push({\n        type: \"entities\",\n        entities: ungroupedEntitites.person\n      });\n    } else {\n      let backgroundColor;\n      let foregroundColor = \"\";\n\n      for (const personEntityId of ungroupedEntitites.person) {\n        const stateObj = entities[personEntityId];\n        let image = stateObj.attributes.entity_picture;\n\n        if (!image) {\n          if (backgroundColor === undefined) {\n            const computedStyle = getComputedStyle(document.body);\n            backgroundColor = encodeURIComponent(computedStyle.getPropertyValue(\"--light-primary-color\").trim());\n            foregroundColor = encodeURIComponent((computedStyle.getPropertyValue(\"--text-light-primary-color\") || computedStyle.getPropertyValue(\"--primary-text-color\")).trim());\n          }\n\n          const initials = (0,_data_user__WEBPACK_IMPORTED_MODULE_8__.computeUserInitials)(stateObj.attributes.friendly_name || \"\");\n          image = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:${backgroundColor}'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='${foregroundColor}' font-size='1.3em' dy='.3em'%3E${initials}%3C/text%3E%3C/g%3E%3C/svg%3E`;\n        }\n\n        personCards.push({\n          type: \"picture-entity\",\n          entity: personEntityId,\n          aspect_ratio: \"1\",\n          show_name: false,\n          image\n        });\n      }\n\n      cards.push({\n        type: \"grid\",\n        square: true,\n        columns: 3,\n        cards: personCards\n      });\n    }\n\n    delete ungroupedEntitites.person;\n  }\n\n  splitted.groups.forEach(groupEntity => {\n    cards.push(...computeCards(groupEntity.attributes.entity_id.map(entityId => [entityId, entities[entityId]]), {\n      title: (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__.computeStateName)(groupEntity),\n      show_header_toggle: groupEntity.attributes.control !== \"hidden\"\n    }));\n  }); // Group helper entities in a single card\n\n  const helperEntities = [];\n\n  for (const domain of _config_helpers_const__WEBPACK_IMPORTED_MODULE_9__.HELPER_DOMAINS) {\n    if (!(domain in ungroupedEntitites)) {\n      continue;\n    }\n\n    helperEntities.push(...ungroupedEntitites[domain]);\n    delete ungroupedEntitites[domain];\n  } // Prepare translations for cards\n\n\n  const domainTranslations = {};\n\n  for (const domain of Object.keys(ungroupedEntitites)) {\n    domainTranslations[domain] = (0,_data_integration__WEBPACK_IMPORTED_MODULE_6__.domainToName)(localize, domain);\n  }\n\n  if (helperEntities.length) {\n    ungroupedEntitites._helpers = helperEntities;\n    domainTranslations._helpers = localize(\"ui.panel.lovelace.strategy.original-states.helpers\");\n  }\n\n  Object.keys(ungroupedEntitites).sort((domain1, domain2) => (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_5__.stringCompare)(domainTranslations[domain1], domainTranslations[domain2])).forEach(domain => {\n    cards.push(...computeCards(ungroupedEntitites[domain].sort((a, b) => (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_5__.stringCompare)((0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__.computeStateName)(entities[a]), (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__.computeStateName)(entities[b]))).map(entityId => [entityId, entities[entityId]]), {\n      title: domainTranslations[domain]\n    }));\n  });\n  const view = {\n    path,\n    title,\n    cards\n  };\n\n  if (icon) {\n    view.icon = icon;\n  }\n\n  return view;\n};\nconst generateDefaultViewConfig = (areaEntries, deviceEntries, entityEntries, entities, localize, energyPrefs) => {\n  const states = computeDefaultViewStates(entities, entityEntries);\n  const path = \"default_view\";\n  const title = \"Home\";\n  const icon = undefined; // In the case of a default view, we want to use the group order attribute\n\n  const groupOrders = {};\n  Object.keys(states).forEach(entityId => {\n    const stateObj = states[entityId];\n\n    if (stateObj.attributes.order) {\n      groupOrders[entityId] = stateObj.attributes.order;\n    }\n  });\n  const splittedByAreas = splitByAreas(areaEntries, deviceEntries, entityEntries, states);\n  const config = generateViewConfig(localize, path, title, icon, splittedByAreas.otherEntities, groupOrders);\n  const areaCards = [];\n  splittedByAreas.areasWithEntities.forEach(([area, areaEntities]) => {\n    areaCards.push(...computeCards(areaEntities.map(entity => [entity.entity_id, entity]), {\n      title: area.name\n    }));\n  });\n\n  if (energyPrefs) {\n    // Distribution card requires the grid to be configured\n    const grid = energyPrefs.energy_sources.find(source => source.type === \"grid\");\n\n    if (grid && grid.flow_from.length > 0) {\n      areaCards.push({\n        title: localize(\"ui.panel.lovelace.cards.energy.energy_distribution.title_today\"),\n        type: \"energy-distribution\",\n        link_dashboard: true\n      });\n    }\n  }\n\n  config.cards.unshift(...areaCards);\n  return config;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9nZW5lcmF0ZS1sb3ZlbGFjZS1jb25maWcudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBRUE7QUFDQTtBQVVBO0FBRUE7QUFXQTs7QUFPQTtBQU1BO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBS0E7QUFDQTtBQUdBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7QUFFQTtBQUtBOztBQUdBO0FBRUE7QUFJQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7O0FBQ0E7QUFTQTtBQUNBOztBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBRkE7QUFNQTtBQUNBO0FBQ0E7QUFHQTs7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7O0FBRUE7QUFJQTtBQUNBO0FBV0E7QUFDQTs7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFRQTtBQUNBO0FBSUE7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTUE7O0FBQ0E7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUZBO0FBTUE7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBR0E7O0FBRUE7QUFLQTtBQWNBO0FBREE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7O0FBTUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQVFBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFTQTtBQUVBO0FBQ0E7QUFJQTtBQURBO0FBS0E7O0FBRUE7QUFDQTtBQUNBOztBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7O0FBRUE7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9nZW5lcmF0ZS1sb3ZlbGFjZS1jb25maWcudHM/ZDhhOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIYXNzRW50aXRpZXMsIEhhc3NFbnRpdHkgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBjb21wdXRlRG9tYWluIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9kb21haW5cIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfZG9tYWluXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVOYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9uYW1lXCI7XG5pbXBvcnQgeyBzcGxpdEJ5R3JvdXBzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3BsaXRfYnlfZ3JvdXBzXCI7XG5pbXBvcnQgeyBzdHJpcFByZWZpeEZyb21FbnRpdHlOYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3RyaXBfcHJlZml4X2Zyb21fZW50aXR5X25hbWVcIjtcbmltcG9ydCB7IHN0cmluZ0NvbXBhcmUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3N0cmluZy9jb21wYXJlXCI7XG5pbXBvcnQgeyBMb2NhbGl6ZUZ1bmMgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3RyYW5zbGF0aW9ucy9sb2NhbGl6ZVwiO1xuaW1wb3J0IHR5cGUgeyBBcmVhUmVnaXN0cnlFbnRyeSB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2FyZWFfcmVnaXN0cnlcIjtcbmltcG9ydCB0eXBlIHsgRGV2aWNlUmVnaXN0cnlFbnRyeSB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2RldmljZV9yZWdpc3RyeVwiO1xuaW1wb3J0IHtcbiAgRW5lcmd5UHJlZmVyZW5jZXMsXG4gIEdyaWRTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZSxcbn0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvZW5lcmd5XCI7XG5pbXBvcnQgdHlwZSB7IEVudGl0eVJlZ2lzdHJ5RW50cnkgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9lbnRpdHlfcmVnaXN0cnlcIjtcbmltcG9ydCB7IGRvbWFpblRvTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2ludGVncmF0aW9uXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmRDb25maWcsIExvdmVsYWNlVmlld0NvbmZpZyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2xvdmVsYWNlXCI7XG5pbXBvcnQgeyBTRU5TT1JfREVWSUNFX0NMQVNTX0JBVFRFUlkgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9zZW5zb3JcIjtcbmltcG9ydCB7IGNvbXB1dGVVc2VySW5pdGlhbHMgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS91c2VyXCI7XG5pbXBvcnQge1xuICBBbGFybVBhbmVsQ2FyZENvbmZpZyxcbiAgRW50aXRpZXNDYXJkQ29uZmlnLFxuICBIdW1pZGlmaWVyQ2FyZENvbmZpZyxcbiAgUGljdHVyZUVudGl0eUNhcmRDb25maWcsXG4gIFRoZXJtb3N0YXRDYXJkQ29uZmlnLFxufSBmcm9tIFwiLi4vY2FyZHMvdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlUm93Q29uZmlnIH0gZnJvbSBcIi4uL2VudGl0eS1yb3dzL3R5cGVzXCI7XG5pbXBvcnQgeyBCdXR0b25zSGVhZGVyRm9vdGVyQ29uZmlnIH0gZnJvbSBcIi4uL2hlYWRlci1mb290ZXIvdHlwZXNcIjtcbmltcG9ydCB7IEhFTFBFUl9ET01BSU5TIH0gZnJvbSBcIi4uLy4uL2NvbmZpZy9oZWxwZXJzL2NvbnN0XCI7XG5cbmNvbnN0IEhJREVfRE9NQUlOID0gbmV3IFNldChbXG4gIFwiYXV0b21hdGlvblwiLFxuICBcImNvbmZpZ3VyYXRvclwiLFxuICBcImRldmljZV90cmFja2VyXCIsXG4gIFwiZ2VvX2xvY2F0aW9uXCIsXG4gIFwicGVyc2lzdGVudF9ub3RpZmljYXRpb25cIixcbiAgXCJzY3JpcHRcIixcbiAgXCJzdW5cIixcbiAgXCJ6b25lXCIsXG5dKTtcblxuY29uc3QgSElERV9QTEFURk9STSA9IG5ldyBTZXQoW1wibW9iaWxlX2FwcFwiXSk7XG5cbmludGVyZmFjZSBTcGxpdHRlZEJ5QXJlYXMge1xuICBhcmVhc1dpdGhFbnRpdGllczogQXJyYXk8W0FyZWFSZWdpc3RyeUVudHJ5LCBIYXNzRW50aXR5W11dPjtcbiAgb3RoZXJFbnRpdGllczogSGFzc0VudGl0aWVzO1xufVxuXG5jb25zdCBzcGxpdEJ5QXJlYXMgPSAoXG4gIGFyZWFFbnRyaWVzOiBBcmVhUmVnaXN0cnlFbnRyeVtdLFxuICBkZXZpY2VFbnRyaWVzOiBEZXZpY2VSZWdpc3RyeUVudHJ5W10sXG4gIGVudGl0eUVudHJpZXM6IEVudGl0eVJlZ2lzdHJ5RW50cnlbXSxcbiAgZW50aXRpZXM6IEhhc3NFbnRpdGllc1xuKTogU3BsaXR0ZWRCeUFyZWFzID0+IHtcbiAgY29uc3QgYWxsRW50aXRpZXMgPSB7IC4uLmVudGl0aWVzIH07XG4gIGNvbnN0IGFyZWFzV2l0aEVudGl0aWVzOiBTcGxpdHRlZEJ5QXJlYXNbXCJhcmVhc1dpdGhFbnRpdGllc1wiXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgYXJlYSBvZiBhcmVhRW50cmllcykge1xuICAgIGNvbnN0IGFyZWFFbnRpdGllczogSGFzc0VudGl0eVtdID0gW107XG4gICAgY29uc3QgYXJlYURldmljZXMgPSBuZXcgU2V0KFxuICAgICAgZGV2aWNlRW50cmllc1xuICAgICAgICAuZmlsdGVyKChkZXZpY2UpID0+IGRldmljZS5hcmVhX2lkID09PSBhcmVhLmFyZWFfaWQpXG4gICAgICAgIC5tYXAoKGRldmljZSkgPT4gZGV2aWNlLmlkKVxuICAgICk7XG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgZW50aXR5RW50cmllcykge1xuICAgICAgaWYgKFxuICAgICAgICAoKGFyZWFEZXZpY2VzLmhhcyhcbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgZW50aXR5LmRldmljZV9pZFxuICAgICAgICApICYmXG4gICAgICAgICAgIWVudGl0eS5hcmVhX2lkKSB8fFxuICAgICAgICAgIGVudGl0eS5hcmVhX2lkID09PSBhcmVhLmFyZWFfaWQpICYmXG4gICAgICAgIGVudGl0eS5lbnRpdHlfaWQgaW4gYWxsRW50aXRpZXNcbiAgICAgICkge1xuICAgICAgICBhcmVhRW50aXRpZXMucHVzaChhbGxFbnRpdGllc1tlbnRpdHkuZW50aXR5X2lkXSk7XG4gICAgICAgIGRlbGV0ZSBhbGxFbnRpdGllc1tlbnRpdHkuZW50aXR5X2lkXTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGFyZWFFbnRpdGllcy5sZW5ndGggPiAwKSB7XG4gICAgICBhcmVhc1dpdGhFbnRpdGllcy5wdXNoKFthcmVhLCBhcmVhRW50aXRpZXNdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBhcmVhc1dpdGhFbnRpdGllcyxcbiAgICBvdGhlckVudGl0aWVzOiBhbGxFbnRpdGllcyxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb21wdXRlQ2FyZHMgPSAoXG4gIHN0YXRlczogQXJyYXk8W3N0cmluZywgSGFzc0VudGl0eT9dPixcbiAgZW50aXR5Q2FyZE9wdGlvbnM6IFBhcnRpYWw8RW50aXRpZXNDYXJkQ29uZmlnPixcbiAgcmVuZGVyRm9vdGVyRW50aXRpZXMgPSB0cnVlXG4pOiBMb3ZlbGFjZUNhcmRDb25maWdbXSA9PiB7XG4gIGNvbnN0IGNhcmRzOiBMb3ZlbGFjZUNhcmRDb25maWdbXSA9IFtdO1xuXG4gIC8vIEZvciBlbnRpdHkgY2FyZFxuICBjb25zdCBlbnRpdGllczogQXJyYXk8c3RyaW5nIHwgTG92ZWxhY2VSb3dDb25maWc+ID0gW107XG5cbiAgY29uc3QgdGl0bGVQcmVmaXggPSBlbnRpdHlDYXJkT3B0aW9ucy50aXRsZVxuICAgID8gZW50aXR5Q2FyZE9wdGlvbnMudGl0bGUudG9Mb3dlckNhc2UoKVxuICAgIDogdW5kZWZpbmVkO1xuXG4gIGNvbnN0IGZvb3RlckVudGl0aWVzOiBCdXR0b25zSGVhZGVyRm9vdGVyQ29uZmlnW1wiZW50aXRpZXNcIl0gPSBbXTtcblxuICBmb3IgKGNvbnN0IFtlbnRpdHlJZCwgc3RhdGVPYmpdIG9mIHN0YXRlcykge1xuICAgIGNvbnN0IGRvbWFpbiA9IGNvbXB1dGVEb21haW4oZW50aXR5SWQpO1xuXG4gICAgaWYgKGRvbWFpbiA9PT0gXCJhbGFybV9jb250cm9sX3BhbmVsXCIpIHtcbiAgICAgIGNvbnN0IGNhcmRDb25maWc6IEFsYXJtUGFuZWxDYXJkQ29uZmlnID0ge1xuICAgICAgICB0eXBlOiBcImFsYXJtLXBhbmVsXCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICB9O1xuICAgICAgY2FyZHMucHVzaChjYXJkQ29uZmlnKTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJjYW1lcmFcIikge1xuICAgICAgY29uc3QgY2FyZENvbmZpZzogUGljdHVyZUVudGl0eUNhcmRDb25maWcgPSB7XG4gICAgICAgIHR5cGU6IFwicGljdHVyZS1lbnRpdHlcIixcbiAgICAgICAgZW50aXR5OiBlbnRpdHlJZCxcbiAgICAgIH07XG4gICAgICBjYXJkcy5wdXNoKGNhcmRDb25maWcpO1xuICAgIH0gZWxzZSBpZiAoZG9tYWluID09PSBcImNsaW1hdGVcIikge1xuICAgICAgY29uc3QgY2FyZENvbmZpZzogVGhlcm1vc3RhdENhcmRDb25maWcgPSB7XG4gICAgICAgIHR5cGU6IFwidGhlcm1vc3RhdFwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfTtcbiAgICAgIGNhcmRzLnB1c2goY2FyZENvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwiaHVtaWRpZmllclwiKSB7XG4gICAgICBjb25zdCBjYXJkQ29uZmlnOiBIdW1pZGlmaWVyQ2FyZENvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogXCJodW1pZGlmaWVyXCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICB9O1xuICAgICAgY2FyZHMucHVzaChjYXJkQ29uZmlnKTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJtZWRpYV9wbGF5ZXJcIikge1xuICAgICAgY29uc3QgY2FyZENvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogXCJtZWRpYS1jb250cm9sXCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICB9O1xuICAgICAgY2FyZHMucHVzaChjYXJkQ29uZmlnKTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJwbGFudFwiKSB7XG4gICAgICBjb25zdCBjYXJkQ29uZmlnID0ge1xuICAgICAgICB0eXBlOiBcInBsYW50LXN0YXR1c1wiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfTtcbiAgICAgIGNhcmRzLnB1c2goY2FyZENvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwid2VhdGhlclwiKSB7XG4gICAgICBjb25zdCBjYXJkQ29uZmlnID0ge1xuICAgICAgICB0eXBlOiBcIndlYXRoZXItZm9yZWNhc3RcIixcbiAgICAgICAgZW50aXR5OiBlbnRpdHlJZCxcbiAgICAgICAgc2hvd19mb3JlY2FzdDogZmFsc2UsXG4gICAgICB9O1xuICAgICAgY2FyZHMucHVzaChjYXJkQ29uZmlnKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgcmVuZGVyRm9vdGVyRW50aXRpZXMgJiZcbiAgICAgIChkb21haW4gPT09IFwic2NlbmVcIiB8fCBkb21haW4gPT09IFwic2NyaXB0XCIpXG4gICAgKSB7XG4gICAgICBjb25zdCBjb25mOiB0eXBlb2YgZm9vdGVyRW50aXRpZXNbMF0gPSB7XG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICAgIHNob3dfaWNvbjogdHJ1ZSxcbiAgICAgICAgc2hvd19uYW1lOiB0cnVlLFxuICAgICAgfTtcbiAgICAgIGxldCBuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICBpZiAoXG4gICAgICAgIHRpdGxlUHJlZml4ICYmXG4gICAgICAgIHN0YXRlT2JqICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25kLWFzc2lnblxuICAgICAgICAobmFtZSA9IHN0cmlwUHJlZml4RnJvbUVudGl0eU5hbWUoXG4gICAgICAgICAgY29tcHV0ZVN0YXRlTmFtZShzdGF0ZU9iaiksXG4gICAgICAgICAgdGl0bGVQcmVmaXhcbiAgICAgICAgKSlcbiAgICAgICkge1xuICAgICAgICBjb25mLm5hbWUgPSBuYW1lO1xuICAgICAgfVxuICAgICAgZm9vdGVyRW50aXRpZXMucHVzaChjb25mKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgZG9tYWluID09PSBcInNlbnNvclwiICYmXG4gICAgICBzdGF0ZU9iaj8uYXR0cmlidXRlcy5kZXZpY2VfY2xhc3MgPT09IFNFTlNPUl9ERVZJQ0VfQ0xBU1NfQkFUVEVSWVxuICAgICkge1xuICAgICAgLy8gRG8gbm90aGluZy5cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGVudGl0eUNvbmYgPVxuICAgICAgICB0aXRsZVByZWZpeCAmJlxuICAgICAgICBzdGF0ZU9iaiAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZC1hc3NpZ25cbiAgICAgICAgKG5hbWUgPSBzdHJpcFByZWZpeEZyb21FbnRpdHlOYW1lKFxuICAgICAgICAgIGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopLFxuICAgICAgICAgIHRpdGxlUHJlZml4XG4gICAgICAgICkpXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiBlbnRpdHlJZDtcblxuICAgICAgZW50aXRpZXMucHVzaChlbnRpdHlDb25mKTtcbiAgICB9XG4gIH1cblxuICAvLyBJZiB3ZSBlbmRlZCB1cCB3aXRoIGZvb3RlciBlbnRpdGllcyBidXQgbm8gbm9ybWFsIGVudGl0aWVzLFxuICAvLyByZW5kZXIgdGhlIGZvb3RlciBlbnRpdGllcyBhcyBub3JtYWwgZW50aXRpZXMuXG4gIGlmIChlbnRpdGllcy5sZW5ndGggPT09IDAgJiYgZm9vdGVyRW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBjb21wdXRlQ2FyZHMoc3RhdGVzLCBlbnRpdHlDYXJkT3B0aW9ucywgZmFsc2UpO1xuICB9XG5cbiAgaWYgKGVudGl0aWVzLmxlbmd0aCA+IDAgfHwgZm9vdGVyRW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGNhcmQ6IEVudGl0aWVzQ2FyZENvbmZpZyA9IHtcbiAgICAgIHR5cGU6IFwiZW50aXRpZXNcIixcbiAgICAgIGVudGl0aWVzLFxuICAgICAgLi4uZW50aXR5Q2FyZE9wdGlvbnMsXG4gICAgfTtcbiAgICBpZiAoZm9vdGVyRW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgY2FyZC5mb290ZXIgPSB7XG4gICAgICAgIHR5cGU6IFwiYnV0dG9uc1wiLFxuICAgICAgICBlbnRpdGllczogZm9vdGVyRW50aXRpZXMsXG4gICAgICB9IGFzIEJ1dHRvbnNIZWFkZXJGb290ZXJDb25maWc7XG4gICAgfVxuICAgIGNhcmRzLnVuc2hpZnQoY2FyZCk7XG4gIH1cblxuICBpZiAoY2FyZHMubGVuZ3RoIDwgMikge1xuICAgIHJldHVybiBjYXJkcztcbiAgfVxuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgdHlwZTogXCJncmlkXCIsXG4gICAgICBzcXVhcmU6IGZhbHNlLFxuICAgICAgY29sdW1uczogMSxcbiAgICAgIGNhcmRzLFxuICAgIH0sXG4gIF07XG59O1xuXG5jb25zdCBjb21wdXRlRGVmYXVsdFZpZXdTdGF0ZXMgPSAoXG4gIGVudGl0aWVzOiBIYXNzRW50aXRpZXMsXG4gIGVudGl0eUVudHJpZXM6IEVudGl0eVJlZ2lzdHJ5RW50cnlbXVxuKTogSGFzc0VudGl0aWVzID0+IHtcbiAgY29uc3Qgc3RhdGVzID0ge307XG4gIGNvbnN0IGhpZGRlbkVudGl0aWVzID0gbmV3IFNldChcbiAgICBlbnRpdHlFbnRyaWVzXG4gICAgICAuZmlsdGVyKFxuICAgICAgICAoZW50cnkpID0+XG4gICAgICAgICAgZW50cnkuZW50aXR5X2NhdGVnb3J5IHx8XG4gICAgICAgICAgSElERV9QTEFURk9STS5oYXMoZW50cnkucGxhdGZvcm0pIHx8XG4gICAgICAgICAgZW50cnkuaGlkZGVuX2J5XG4gICAgICApXG4gICAgICAubWFwKChlbnRyeSkgPT4gZW50cnkuZW50aXR5X2lkKVxuICApO1xuXG4gIE9iamVjdC5rZXlzKGVudGl0aWVzKS5mb3JFYWNoKChlbnRpdHlJZCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gZW50aXRpZXNbZW50aXR5SWRdO1xuICAgIGlmIChcbiAgICAgICFISURFX0RPTUFJTi5oYXMoY29tcHV0ZVN0YXRlRG9tYWluKHN0YXRlT2JqKSkgJiZcbiAgICAgICFoaWRkZW5FbnRpdGllcy5oYXMoc3RhdGVPYmouZW50aXR5X2lkKVxuICAgICkge1xuICAgICAgc3RhdGVzW2VudGl0eUlkXSA9IGVudGl0aWVzW2VudGl0eUlkXTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gc3RhdGVzO1xufTtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlVmlld0NvbmZpZyA9IChcbiAgbG9jYWxpemU6IExvY2FsaXplRnVuYyxcbiAgcGF0aDogc3RyaW5nLFxuICB0aXRsZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICBpY29uOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIGVudGl0aWVzOiBIYXNzRW50aXRpZXMsXG4gIGdyb3VwT3JkZXJzOiB7IFtlbnRpdHlJZDogc3RyaW5nXTogbnVtYmVyIH1cbik6IExvdmVsYWNlVmlld0NvbmZpZyA9PiB7XG4gIGNvbnN0IHNwbGl0dGVkID0gc3BsaXRCeUdyb3VwcyhlbnRpdGllcyk7XG4gIHNwbGl0dGVkLmdyb3Vwcy5zb3J0KFxuICAgIChncjEsIGdyMikgPT4gZ3JvdXBPcmRlcnNbZ3IxLmVudGl0eV9pZF0gLSBncm91cE9yZGVyc1tncjIuZW50aXR5X2lkXVxuICApO1xuXG4gIGNvbnN0IHVuZ3JvdXBlZEVudGl0aXRlczogeyBbZG9tYWluOiBzdHJpbmddOiBzdHJpbmdbXSB9ID0ge307XG5cbiAgLy8gT3JnYW5pemUgdW5ncm91cGVkIGVudGl0aWVzIGluIHVuZ3JvdXBlZCB0aGluZ3NcbiAgT2JqZWN0LmtleXMoc3BsaXR0ZWQudW5ncm91cGVkKS5mb3JFYWNoKChlbnRpdHlJZCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gc3BsaXR0ZWQudW5ncm91cGVkW2VudGl0eUlkXTtcbiAgICBjb25zdCBkb21haW4gPSBjb21wdXRlU3RhdGVEb21haW4oc3RhdGUpO1xuXG4gICAgaWYgKCEoZG9tYWluIGluIHVuZ3JvdXBlZEVudGl0aXRlcykpIHtcbiAgICAgIHVuZ3JvdXBlZEVudGl0aXRlc1tkb21haW5dID0gW107XG4gICAgfVxuXG4gICAgdW5ncm91cGVkRW50aXRpdGVzW2RvbWFpbl0ucHVzaChzdGF0ZS5lbnRpdHlfaWQpO1xuICB9KTtcblxuICBjb25zdCBjYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICBpZiAoXCJwZXJzb25cIiBpbiB1bmdyb3VwZWRFbnRpdGl0ZXMpIHtcbiAgICBjb25zdCBwZXJzb25DYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICAgIGlmICh1bmdyb3VwZWRFbnRpdGl0ZXMucGVyc29uLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwiZW50aXRpZXNcIixcbiAgICAgICAgZW50aXRpZXM6IHVuZ3JvdXBlZEVudGl0aXRlcy5wZXJzb24sXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGJhY2tncm91bmRDb2xvcjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgbGV0IGZvcmVncm91bmRDb2xvciA9IFwiXCI7XG5cbiAgICAgIGZvciAoY29uc3QgcGVyc29uRW50aXR5SWQgb2YgdW5ncm91cGVkRW50aXRpdGVzLnBlcnNvbikge1xuICAgICAgICBjb25zdCBzdGF0ZU9iaiA9IGVudGl0aWVzW3BlcnNvbkVudGl0eUlkXTtcblxuICAgICAgICBsZXQgaW1hZ2UgPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLmVudGl0eV9waWN0dXJlO1xuXG4gICAgICAgIGlmICghaW1hZ2UpIHtcbiAgICAgICAgICBpZiAoYmFja2dyb3VuZENvbG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCItLWxpZ2h0LXByaW1hcnktY29sb3JcIikudHJpbSgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZm9yZWdyb3VuZENvbG9yID0gZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS10ZXh0LWxpZ2h0LXByaW1hcnktY29sb3JcIikgfHxcbiAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCItLXByaW1hcnktdGV4dC1jb2xvclwiKVxuICAgICAgICAgICAgICApLnRyaW0oKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgaW5pdGlhbHMgPSBjb21wdXRlVXNlckluaXRpYWxzKFxuICAgICAgICAgICAgc3RhdGVPYmouYXR0cmlidXRlcy5mcmllbmRseV9uYW1lIHx8IFwiXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIGltYWdlID0gYGRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgNTAgNTAnIHdpZHRoPSc1MCcgaGVpZ2h0PSc1MCcgc3R5bGU9J2JhY2tncm91bmQtY29sb3I6JHtiYWNrZ3JvdW5kQ29sb3J9JyUzRSUzQ2clM0UlM0N0ZXh0IGZvbnQtZmFtaWx5PSdyb2JvdG8nIHg9JzUwJTI1JyB5PSc1MCUyNScgdGV4dC1hbmNob3I9J21pZGRsZScgc3Ryb2tlPScke2ZvcmVncm91bmRDb2xvcn0nIGZvbnQtc2l6ZT0nMS4zZW0nIGR5PScuM2VtJyUzRSR7aW5pdGlhbHN9JTNDL3RleHQlM0UlM0MvZyUzRSUzQy9zdmclM0VgO1xuICAgICAgICB9XG5cbiAgICAgICAgcGVyc29uQ2FyZHMucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJwaWN0dXJlLWVudGl0eVwiLFxuICAgICAgICAgIGVudGl0eTogcGVyc29uRW50aXR5SWQsXG4gICAgICAgICAgYXNwZWN0X3JhdGlvOiBcIjFcIixcbiAgICAgICAgICBzaG93X25hbWU6IGZhbHNlLFxuICAgICAgICAgIGltYWdlLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwiZ3JpZFwiLFxuICAgICAgICBzcXVhcmU6IHRydWUsXG4gICAgICAgIGNvbHVtbnM6IDMsXG4gICAgICAgIGNhcmRzOiBwZXJzb25DYXJkcyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGRlbGV0ZSB1bmdyb3VwZWRFbnRpdGl0ZXMucGVyc29uO1xuICB9XG5cbiAgc3BsaXR0ZWQuZ3JvdXBzLmZvckVhY2goKGdyb3VwRW50aXR5KSA9PiB7XG4gICAgY2FyZHMucHVzaChcbiAgICAgIC4uLmNvbXB1dGVDYXJkcyhcbiAgICAgICAgZ3JvdXBFbnRpdHkuYXR0cmlidXRlcy5lbnRpdHlfaWQubWFwKFxuICAgICAgICAgIChlbnRpdHlJZCk6IFtzdHJpbmcsIEhhc3NFbnRpdHldID0+IFtlbnRpdHlJZCwgZW50aXRpZXNbZW50aXR5SWRdXVxuICAgICAgICApLFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGNvbXB1dGVTdGF0ZU5hbWUoZ3JvdXBFbnRpdHkpLFxuICAgICAgICAgIHNob3dfaGVhZGVyX3RvZ2dsZTogZ3JvdXBFbnRpdHkuYXR0cmlidXRlcy5jb250cm9sICE9PSBcImhpZGRlblwiLFxuICAgICAgICB9XG4gICAgICApXG4gICAgKTtcbiAgfSk7XG5cbiAgLy8gR3JvdXAgaGVscGVyIGVudGl0aWVzIGluIGEgc2luZ2xlIGNhcmRcbiAgY29uc3QgaGVscGVyRW50aXRpZXM6IHN0cmluZ1tdID0gW107XG5cbiAgZm9yIChjb25zdCBkb21haW4gb2YgSEVMUEVSX0RPTUFJTlMpIHtcbiAgICBpZiAoIShkb21haW4gaW4gdW5ncm91cGVkRW50aXRpdGVzKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGhlbHBlckVudGl0aWVzLnB1c2goLi4udW5ncm91cGVkRW50aXRpdGVzW2RvbWFpbl0pO1xuICAgIGRlbGV0ZSB1bmdyb3VwZWRFbnRpdGl0ZXNbZG9tYWluXTtcbiAgfVxuXG4gIC8vIFByZXBhcmUgdHJhbnNsYXRpb25zIGZvciBjYXJkc1xuICBjb25zdCBkb21haW5UcmFuc2xhdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuICBmb3IgKGNvbnN0IGRvbWFpbiBvZiBPYmplY3Qua2V5cyh1bmdyb3VwZWRFbnRpdGl0ZXMpKSB7XG4gICAgZG9tYWluVHJhbnNsYXRpb25zW2RvbWFpbl0gPSBkb21haW5Ub05hbWUobG9jYWxpemUsIGRvbWFpbik7XG4gIH1cblxuICBpZiAoaGVscGVyRW50aXRpZXMubGVuZ3RoKSB7XG4gICAgdW5ncm91cGVkRW50aXRpdGVzLl9oZWxwZXJzID0gaGVscGVyRW50aXRpZXM7XG4gICAgZG9tYWluVHJhbnNsYXRpb25zLl9oZWxwZXJzID0gbG9jYWxpemUoXG4gICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLnN0cmF0ZWd5Lm9yaWdpbmFsLXN0YXRlcy5oZWxwZXJzXCJcbiAgICApO1xuICB9XG5cbiAgT2JqZWN0LmtleXModW5ncm91cGVkRW50aXRpdGVzKVxuICAgIC5zb3J0KChkb21haW4xLCBkb21haW4yKSA9PlxuICAgICAgc3RyaW5nQ29tcGFyZShkb21haW5UcmFuc2xhdGlvbnNbZG9tYWluMV0sIGRvbWFpblRyYW5zbGF0aW9uc1tkb21haW4yXSlcbiAgICApXG4gICAgLmZvckVhY2goKGRvbWFpbikgPT4ge1xuICAgICAgY2FyZHMucHVzaChcbiAgICAgICAgLi4uY29tcHV0ZUNhcmRzKFxuICAgICAgICAgIHVuZ3JvdXBlZEVudGl0aXRlc1tkb21haW5dXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT5cbiAgICAgICAgICAgICAgc3RyaW5nQ29tcGFyZShcbiAgICAgICAgICAgICAgICBjb21wdXRlU3RhdGVOYW1lKGVudGl0aWVzW2FdKSxcbiAgICAgICAgICAgICAgICBjb21wdXRlU3RhdGVOYW1lKGVudGl0aWVzW2JdKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAubWFwKChlbnRpdHlJZCk6IFtzdHJpbmcsIEhhc3NFbnRpdHldID0+IFtcbiAgICAgICAgICAgICAgZW50aXR5SWQsXG4gICAgICAgICAgICAgIGVudGl0aWVzW2VudGl0eUlkXSxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBkb21haW5UcmFuc2xhdGlvbnNbZG9tYWluXSxcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgY29uc3QgdmlldzogTG92ZWxhY2VWaWV3Q29uZmlnID0ge1xuICAgIHBhdGgsXG4gICAgdGl0bGUsXG4gICAgY2FyZHMsXG4gIH07XG5cbiAgaWYgKGljb24pIHtcbiAgICB2aWV3Lmljb24gPSBpY29uO1xuICB9XG5cbiAgcmV0dXJuIHZpZXc7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVEZWZhdWx0Vmlld0NvbmZpZyA9IChcbiAgYXJlYUVudHJpZXM6IEFyZWFSZWdpc3RyeUVudHJ5W10sXG4gIGRldmljZUVudHJpZXM6IERldmljZVJlZ2lzdHJ5RW50cnlbXSxcbiAgZW50aXR5RW50cmllczogRW50aXR5UmVnaXN0cnlFbnRyeVtdLFxuICBlbnRpdGllczogSGFzc0VudGl0aWVzLFxuICBsb2NhbGl6ZTogTG9jYWxpemVGdW5jLFxuICBlbmVyZ3lQcmVmcz86IEVuZXJneVByZWZlcmVuY2VzXG4pOiBMb3ZlbGFjZVZpZXdDb25maWcgPT4ge1xuICBjb25zdCBzdGF0ZXMgPSBjb21wdXRlRGVmYXVsdFZpZXdTdGF0ZXMoZW50aXRpZXMsIGVudGl0eUVudHJpZXMpO1xuICBjb25zdCBwYXRoID0gXCJkZWZhdWx0X3ZpZXdcIjtcbiAgY29uc3QgdGl0bGUgPSBcIkhvbWVcIjtcbiAgY29uc3QgaWNvbiA9IHVuZGVmaW5lZDtcblxuICAvLyBJbiB0aGUgY2FzZSBvZiBhIGRlZmF1bHQgdmlldywgd2Ugd2FudCB0byB1c2UgdGhlIGdyb3VwIG9yZGVyIGF0dHJpYnV0ZVxuICBjb25zdCBncm91cE9yZGVycyA9IHt9O1xuICBPYmplY3Qua2V5cyhzdGF0ZXMpLmZvckVhY2goKGVudGl0eUlkKSA9PiB7XG4gICAgY29uc3Qgc3RhdGVPYmogPSBzdGF0ZXNbZW50aXR5SWRdO1xuICAgIGlmIChzdGF0ZU9iai5hdHRyaWJ1dGVzLm9yZGVyKSB7XG4gICAgICBncm91cE9yZGVyc1tlbnRpdHlJZF0gPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLm9yZGVyO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc3BsaXR0ZWRCeUFyZWFzID0gc3BsaXRCeUFyZWFzKFxuICAgIGFyZWFFbnRyaWVzLFxuICAgIGRldmljZUVudHJpZXMsXG4gICAgZW50aXR5RW50cmllcyxcbiAgICBzdGF0ZXNcbiAgKTtcblxuICBjb25zdCBjb25maWcgPSBnZW5lcmF0ZVZpZXdDb25maWcoXG4gICAgbG9jYWxpemUsXG4gICAgcGF0aCxcbiAgICB0aXRsZSxcbiAgICBpY29uLFxuICAgIHNwbGl0dGVkQnlBcmVhcy5vdGhlckVudGl0aWVzLFxuICAgIGdyb3VwT3JkZXJzXG4gICk7XG5cbiAgY29uc3QgYXJlYUNhcmRzOiBMb3ZlbGFjZUNhcmRDb25maWdbXSA9IFtdO1xuXG4gIHNwbGl0dGVkQnlBcmVhcy5hcmVhc1dpdGhFbnRpdGllcy5mb3JFYWNoKChbYXJlYSwgYXJlYUVudGl0aWVzXSkgPT4ge1xuICAgIGFyZWFDYXJkcy5wdXNoKFxuICAgICAgLi4uY29tcHV0ZUNhcmRzKFxuICAgICAgICBhcmVhRW50aXRpZXMubWFwKChlbnRpdHkpID0+IFtlbnRpdHkuZW50aXR5X2lkLCBlbnRpdHldKSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBhcmVhLm5hbWUsXG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9KTtcblxuICBpZiAoZW5lcmd5UHJlZnMpIHtcbiAgICAvLyBEaXN0cmlidXRpb24gY2FyZCByZXF1aXJlcyB0aGUgZ3JpZCB0byBiZSBjb25maWd1cmVkXG4gICAgY29uc3QgZ3JpZCA9IGVuZXJneVByZWZzLmVuZXJneV9zb3VyY2VzLmZpbmQoXG4gICAgICAoc291cmNlKSA9PiBzb3VyY2UudHlwZSA9PT0gXCJncmlkXCJcbiAgICApIGFzIEdyaWRTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZSB8IHVuZGVmaW5lZDtcblxuICAgIGlmIChncmlkICYmIGdyaWQuZmxvd19mcm9tLmxlbmd0aCA+IDApIHtcbiAgICAgIGFyZWFDYXJkcy5wdXNoKHtcbiAgICAgICAgdGl0bGU6IGxvY2FsaXplKFxuICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UuY2FyZHMuZW5lcmd5LmVuZXJneV9kaXN0cmlidXRpb24udGl0bGVfdG9kYXlcIlxuICAgICAgICApLFxuICAgICAgICB0eXBlOiBcImVuZXJneS1kaXN0cmlidXRpb25cIixcbiAgICAgICAgbGlua19kYXNoYm9hcmQ6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjb25maWcuY2FyZHMhLnVuc2hpZnQoLi4uYXJlYUNhcmRzKTtcblxuICByZXR1cm4gY29uZmlnO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/panels/lovelace/common/generate-lovelace-config.ts\n");

/***/ })

}]);